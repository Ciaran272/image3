import{f as Tt,h as bt,g as $t,j as Qt}from"./vendor-other-B_-1jgMS.js";var tr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(S,E){(function(d){S.exports=d()})(function(){return function d(x,v,c){function h(m,p){if(!v[m]){if(!x[m]){var f=typeof Tt=="function"&&Tt;if(!p&&f)return f(m,!0);if(o)return o(m,!0);var e=new Error("Cannot find module '"+m+"'");throw e.code="MODULE_NOT_FOUND",e}var r=v[m]={exports:{}};x[m][0].call(r.exports,function(s){var i=x[m][1][s];return h(i||s)},r,r.exports,d,x,v,c)}return v[m].exports}for(var o=typeof Tt=="function"&&Tt,a=0;a<c.length;a++)h(c[a]);return h}({1:[function(d,x,v){var c=d("./utils"),h=d("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";v.encode=function(a){for(var m,p,f,e,r,s,i,l=[],u=0,_=a.length,A=_,k=c.getTypeOf(a)!=="string";u<a.length;)A=_-u,f=k?(m=a[u++],p=u<_?a[u++]:0,u<_?a[u++]:0):(m=a.charCodeAt(u++),p=u<_?a.charCodeAt(u++):0,u<_?a.charCodeAt(u++):0),e=m>>2,r=(3&m)<<4|p>>4,s=1<A?(15&p)<<2|f>>6:64,i=2<A?63&f:64,l.push(o.charAt(e)+o.charAt(r)+o.charAt(s)+o.charAt(i));return l.join("")},v.decode=function(a){var m,p,f,e,r,s,i=0,l=0,u="data:";if(a.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var _,A=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===o.charAt(64)&&A--,a.charAt(a.length-2)===o.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=h.uint8array?new Uint8Array(0|A):new Array(0|A);i<a.length;)m=o.indexOf(a.charAt(i++))<<2|(e=o.indexOf(a.charAt(i++)))>>4,p=(15&e)<<4|(r=o.indexOf(a.charAt(i++)))>>2,f=(3&r)<<6|(s=o.indexOf(a.charAt(i++))),_[l++]=m,r!==64&&(_[l++]=p),s!==64&&(_[l++]=f);return _}},{"./support":30,"./utils":32}],2:[function(d,x,v){var c=d("./external"),h=d("./stream/DataWorker"),o=d("./stream/Crc32Probe"),a=d("./stream/DataLengthProbe");function m(p,f,e,r,s){this.compressedSize=p,this.uncompressedSize=f,this.crc32=e,this.compression=r,this.compressedContent=s}m.prototype={getContentWorker:function(){var p=new h(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),f=this;return p.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new h(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(p,f,e){return p.pipe(new o).pipe(new a("uncompressedSize")).pipe(f.compressWorker(e)).pipe(new a("compressedSize")).withStreamInfo("compression",f)},x.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(d,x,v){var c=d("./stream/GenericWorker");v.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},v.DEFLATE=d("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(d,x,v){var c=d("./utils"),h=function(){for(var o,a=[],m=0;m<256;m++){o=m;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;a[m]=o}return a}();x.exports=function(o,a){return o!==void 0&&o.length?c.getTypeOf(o)!=="string"?function(m,p,f,e){var r=h,s=e+f;m^=-1;for(var i=e;i<s;i++)m=m>>>8^r[255&(m^p[i])];return-1^m}(0|a,o,o.length,0):function(m,p,f,e){var r=h,s=e+f;m^=-1;for(var i=e;i<s;i++)m=m>>>8^r[255&(m^p.charCodeAt(i))];return-1^m}(0|a,o,o.length,0):0}},{"./utils":32}],5:[function(d,x,v){v.base64=!1,v.binary=!1,v.dir=!1,v.createFolders=!0,v.date=null,v.compression=null,v.compressionOptions=null,v.comment=null,v.unixPermissions=null,v.dosPermissions=null},{}],6:[function(d,x,v){var c=null;c=typeof Promise<"u"?Promise:d("lie"),x.exports={Promise:c}},{lie:37}],7:[function(d,x,v){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",h=d("pako"),o=d("./utils"),a=d("./stream/GenericWorker"),m=c?"uint8array":"array";function p(f,e){a.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=e,this.meta={}}v.magic="\b\0",o.inherits(p,a),p.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(m,f.data),!1)},p.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new h[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(e){f.push({data:e,meta:f.meta})}},v.compressWorker=function(f){return new p("Deflate",f)},v.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(d,x,v){function c(r,s){var i,l="";for(i=0;i<s;i++)l+=String.fromCharCode(255&r),r>>>=8;return l}function h(r,s,i,l,u,_){var A,k,b=r.file,I=r.compression,C=_!==m.utf8encode,F=o.transformTo("string",_(b.name)),z=o.transformTo("string",m.utf8encode(b.name)),W=b.comment,q=o.transformTo("string",_(W)),g=o.transformTo("string",m.utf8encode(W)),T=z.length!==b.name.length,n=g.length!==W.length,L="",nt="",j="",tt=b.dir,M=b.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};s&&!i||(Q.crc32=r.crc32,Q.compressedSize=r.compressedSize,Q.uncompressedSize=r.uncompressedSize);var B=0;s&&(B|=8),C||!T&&!n||(B|=2048);var P=0,$=0;tt&&(P|=16),u==="UNIX"?($=798,P|=function(Z,rt){var et=Z;return Z||(et=rt?16893:33204),(65535&et)<<16}(b.unixPermissions,tt)):($=20,P|=function(Z){return 63&(Z||0)}(b.dosPermissions)),A=M.getUTCHours(),A<<=6,A|=M.getUTCMinutes(),A<<=5,A|=M.getUTCSeconds()/2,k=M.getUTCFullYear()-1980,k<<=4,k|=M.getUTCMonth()+1,k<<=5,k|=M.getUTCDate(),T&&(nt=c(1,1)+c(p(F),4)+z,L+="up"+c(nt.length,2)+nt),n&&(j=c(1,1)+c(p(q),4)+g,L+="uc"+c(j.length,2)+j);var Y="";return Y+=`
\0`,Y+=c(B,2),Y+=I.magic,Y+=c(A,2),Y+=c(k,2),Y+=c(Q.crc32,4),Y+=c(Q.compressedSize,4),Y+=c(Q.uncompressedSize,4),Y+=c(F.length,2),Y+=c(L.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Y+F+L,dirRecord:f.CENTRAL_FILE_HEADER+c($,2)+Y+c(q.length,2)+"\0\0\0\0"+c(P,4)+c(l,4)+F+L+q}}var o=d("../utils"),a=d("../stream/GenericWorker"),m=d("../utf8"),p=d("../crc32"),f=d("../signature");function e(r,s,i,l){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=s,this.zipPlatform=i,this.encodeFileName=l,this.streamFiles=r,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(e,a),e.prototype.push=function(r){var s=r.meta.percent||0,i=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(r):(this.bytesWritten+=r.data.length,a.prototype.push.call(this,{data:r.data,meta:{currentFile:this.currentFile,percent:i?(s+100*(i-l-1))/i:100}}))},e.prototype.openedSource=function(r){this.currentSourceOffset=this.bytesWritten,this.currentFile=r.file.name;var s=this.streamFiles&&!r.file.dir;if(s){var i=h(r,s,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},e.prototype.closedSource=function(r){this.accumulate=!1;var s=this.streamFiles&&!r.file.dir,i=h(r,s,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),s)this.push({data:function(l){return f.DATA_DESCRIPTOR+c(l.crc32,4)+c(l.compressedSize,4)+c(l.uncompressedSize,4)}(r),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},e.prototype.flush=function(){for(var r=this.bytesWritten,s=0;s<this.dirRecords.length;s++)this.push({data:this.dirRecords[s],meta:{percent:100}});var i=this.bytesWritten-r,l=function(u,_,A,k,b){var I=o.transformTo("string",b(k));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(u,2)+c(u,2)+c(_,4)+c(A,4)+c(I.length,2)+I}(this.dirRecords.length,i,r,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},e.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},e.prototype.registerPrevious=function(r){this._sources.push(r);var s=this;return r.on("data",function(i){s.processChunk(i)}),r.on("end",function(){s.closedSource(s.previous.streamInfo),s._sources.length?s.prepareNextSource():s.end()}),r.on("error",function(i){s.error(i)}),this},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},e.prototype.error=function(r){var s=this._sources;if(!a.prototype.error.call(this,r))return!1;for(var i=0;i<s.length;i++)try{s[i].error(r)}catch{}return!0},e.prototype.lock=function(){a.prototype.lock.call(this);for(var r=this._sources,s=0;s<r.length;s++)r[s].lock()},x.exports=e},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(d,x,v){var c=d("../compressions"),h=d("./ZipFileWorker");v.generateWorker=function(o,a,m){var p=new h(a.streamFiles,m,a.platform,a.encodeFileName),f=0;try{o.forEach(function(e,r){f++;var s=function(_,A){var k=_||A,b=c[k];if(!b)throw new Error(k+" is not a valid compression method !");return b}(r.options.compression,a.compression),i=r.options.compressionOptions||a.compressionOptions||{},l=r.dir,u=r.date;r._compressWorker(s,i).withStreamInfo("file",{name:e,dir:l,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(p)}),p.entriesCount=f}catch(e){p.error(e)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(d,x,v){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var h=new c;for(var o in this)typeof this[o]!="function"&&(h[o]=this[o]);return h}}(c.prototype=d("./object")).loadAsync=d("./load"),c.support=d("./support"),c.defaults=d("./defaults"),c.version="3.10.1",c.loadAsync=function(h,o){return new c().loadAsync(h,o)},c.external=d("./external"),x.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(d,x,v){var c=d("./utils"),h=d("./external"),o=d("./utf8"),a=d("./zipEntries"),m=d("./stream/Crc32Probe"),p=d("./nodejsUtils");function f(e){return new h.Promise(function(r,s){var i=e.decompressed.getContentWorker().pipe(new m);i.on("error",function(l){s(l)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?s(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}x.exports=function(e,r){var s=this;return r=c.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),p.isNode&&p.isStream(e)?h.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",e,!0,r.optimizedBinaryString,r.base64).then(function(i){var l=new a(r);return l.load(i),l}).then(function(i){var l=[h.Promise.resolve(i)],u=i.files;if(r.checkCRC32)for(var _=0;_<u.length;_++)l.push(f(u[_]));return h.Promise.all(l)}).then(function(i){for(var l=i.shift(),u=l.files,_=0;_<u.length;_++){var A=u[_],k=A.fileNameStr,b=c.resolve(A.fileNameStr);s.file(b,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:r.createFolders}),A.dir||(s.file(b).unsafeOriginalName=k)}return l.zipComment.length&&(s.comment=l.zipComment),s})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(d,x,v){var c=d("../utils"),h=d("../stream/GenericWorker");function o(a,m){h.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(m)}c.inherits(o,h),o.prototype._bindStream=function(a){var m=this;(this._stream=a).pause(),a.on("data",function(p){m.push({data:p,meta:{percent:0}})}).on("error",function(p){m.isPaused?this.generatedError=p:m.error(p)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},o.prototype.pause=function(){return!!h.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},x.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(d,x,v){var c=d("readable-stream").Readable;function h(o,a,m){c.call(this,a),this._helper=o;var p=this;o.on("data",function(f,e){p.push(f)||p._helper.pause(),m&&m(e)}).on("error",function(f){p.emit("error",f)}).on("end",function(){p.push(null)})}d("../utils").inherits(h,c),h.prototype._read=function(){this._helper.resume()},x.exports=h},{"../utils":32,"readable-stream":16}],14:[function(d,x,v){x.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,h){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,h);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,h)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var h=new Buffer(c);return h.fill(0),h},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(d,x,v){function c(b,I,C){var F,z=o.getTypeOf(I),W=o.extend(C||{},p);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(b=u(b)),W.createFolders&&(F=l(b))&&_.call(this,F,!0);var q=z==="string"&&W.binary===!1&&W.base64===!1;C&&C.binary!==void 0||(W.binary=!q),(I instanceof f&&I.uncompressedSize===0||W.dir||!I||I.length===0)&&(W.base64=!1,W.binary=!0,I="",W.compression="STORE",z="string");var g=null;g=I instanceof f||I instanceof a?I:s.isNode&&s.isStream(I)?new i(b,I):o.prepareContent(b,I,W.binary,W.optimizedBinaryString,W.base64);var T=new e(b,g,W);this.files[b]=T}var h=d("./utf8"),o=d("./utils"),a=d("./stream/GenericWorker"),m=d("./stream/StreamHelper"),p=d("./defaults"),f=d("./compressedObject"),e=d("./zipObject"),r=d("./generate"),s=d("./nodejsUtils"),i=d("./nodejs/NodejsStreamInputAdapter"),l=function(b){b.slice(-1)==="/"&&(b=b.substring(0,b.length-1));var I=b.lastIndexOf("/");return 0<I?b.substring(0,I):""},u=function(b){return b.slice(-1)!=="/"&&(b+="/"),b},_=function(b,I){return I=I!==void 0?I:p.createFolders,b=u(b),this.files[b]||c.call(this,b,null,{dir:!0,createFolders:I}),this.files[b]};function A(b){return Object.prototype.toString.call(b)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(b){var I,C,F;for(I in this.files)F=this.files[I],(C=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&b(C,F)},filter:function(b){var I=[];return this.forEach(function(C,F){b(C,F)&&I.push(F)}),I},file:function(b,I,C){if(arguments.length!==1)return b=this.root+b,c.call(this,b,I,C),this;if(A(b)){var F=b;return this.filter(function(W,q){return!q.dir&&F.test(W)})}var z=this.files[this.root+b];return z&&!z.dir?z:null},folder:function(b){if(!b)return this;if(A(b))return this.filter(function(z,W){return W.dir&&b.test(z)});var I=this.root+b,C=_.call(this,I),F=this.clone();return F.root=C.name,F},remove:function(b){b=this.root+b;var I=this.files[b];if(I||(b.slice(-1)!=="/"&&(b+="/"),I=this.files[b]),I&&!I.dir)delete this.files[b];else for(var C=this.filter(function(z,W){return W.name.slice(0,b.length)===b}),F=0;F<C.length;F++)delete this.files[C[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(b){var I,C={};try{if((C=o.extend(b||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");o.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var F=C.comment||this.comment||"";I=r.generateWorker(this,C,F)}catch(z){(I=new a("error")).error(z)}return new m(I,C.type||"string",C.mimeType)},generateAsync:function(b,I){return this.generateInternalStream(b).accumulate(I)},generateNodeStream:function(b,I){return(b=b||{}).type||(b.type="nodebuffer"),this.generateInternalStream(b).toNodejsStream(I)}};x.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(d,x,v){x.exports=d("stream")},{stream:void 0}],17:[function(d,x,v){var c=d("./DataReader");function h(o){c.call(this,o);for(var a=0;a<this.data.length;a++)o[a]=255&o[a]}d("../utils").inherits(h,c),h.prototype.byteAt=function(o){return this.data[this.zero+o]},h.prototype.lastIndexOfSignature=function(o){for(var a=o.charCodeAt(0),m=o.charCodeAt(1),p=o.charCodeAt(2),f=o.charCodeAt(3),e=this.length-4;0<=e;--e)if(this.data[e]===a&&this.data[e+1]===m&&this.data[e+2]===p&&this.data[e+3]===f)return e-this.zero;return-1},h.prototype.readAndCheckSignature=function(o){var a=o.charCodeAt(0),m=o.charCodeAt(1),p=o.charCodeAt(2),f=o.charCodeAt(3),e=this.readData(4);return a===e[0]&&m===e[1]&&p===e[2]&&f===e[3]},h.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},x.exports=h},{"../utils":32,"./DataReader":18}],18:[function(d,x,v){var c=d("../utils");function h(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}h.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var a,m=0;for(this.checkOffset(o),a=this.index+o-1;a>=this.index;a--)m=(m<<8)+this.byteAt(a);return this.index+=o,m},readString:function(o){return c.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},x.exports=h},{"../utils":32}],19:[function(d,x,v){var c=d("./Uint8ArrayReader");function h(o){c.call(this,o)}d("../utils").inherits(h,c),h.prototype.readData=function(o){this.checkOffset(o);var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},x.exports=h},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(d,x,v){var c=d("./DataReader");function h(o){c.call(this,o)}d("../utils").inherits(h,c),h.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},h.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},h.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},h.prototype.readData=function(o){this.checkOffset(o);var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},x.exports=h},{"../utils":32,"./DataReader":18}],21:[function(d,x,v){var c=d("./ArrayReader");function h(o){c.call(this,o)}d("../utils").inherits(h,c),h.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},x.exports=h},{"../utils":32,"./ArrayReader":17}],22:[function(d,x,v){var c=d("../utils"),h=d("../support"),o=d("./ArrayReader"),a=d("./StringReader"),m=d("./NodeBufferReader"),p=d("./Uint8ArrayReader");x.exports=function(f){var e=c.getTypeOf(f);return c.checkSupport(e),e!=="string"||h.uint8array?e==="nodebuffer"?new m(f):h.uint8array?new p(c.transformTo("uint8array",f)):new o(c.transformTo("array",f)):new a(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(d,x,v){v.LOCAL_FILE_HEADER="PK",v.CENTRAL_FILE_HEADER="PK",v.CENTRAL_DIRECTORY_END="PK",v.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",v.ZIP64_CENTRAL_DIRECTORY_END="PK",v.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(d,x,v){var c=d("./GenericWorker"),h=d("../utils");function o(a){c.call(this,"ConvertWorker to "+a),this.destType=a}h.inherits(o,c),o.prototype.processChunk=function(a){this.push({data:h.transformTo(this.destType,a.data),meta:a.meta})},x.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(d,x,v){var c=d("./GenericWorker"),h=d("../crc32");function o(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}d("../utils").inherits(o,c),o.prototype.processChunk=function(a){this.streamInfo.crc32=h(a.data,this.streamInfo.crc32||0),this.push(a)},x.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(d,x,v){var c=d("../utils"),h=d("./GenericWorker");function o(a){h.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}c.inherits(o,h),o.prototype.processChunk=function(a){if(a){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+a.data.length}h.prototype.processChunk.call(this,a)},x.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(d,x,v){var c=d("../utils"),h=d("./GenericWorker");function o(a){h.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(p){m.dataIsReady=!0,m.data=p,m.max=p&&p.length||0,m.type=c.getTypeOf(p),m.isPaused||m._tickAndRepeat()},function(p){m.error(p)})}c.inherits(o,h),o.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,m);break;case"uint8array":a=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":a=this.data.slice(this.index,m)}return this.index=m,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},x.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(d,x,v){function c(h){this.name=h||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(h){this.emit("data",h)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(h){this.emit("error",h)}return!0},error:function(h){return!this.isFinished&&(this.isPaused?this.generatedError=h:(this.isFinished=!0,this.emit("error",h),this.previous&&this.previous.error(h),this.cleanUp()),!0)},on:function(h,o){return this._listeners[h].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(h,o){if(this._listeners[h])for(var a=0;a<this._listeners[h].length;a++)this._listeners[h][a].call(this,o)},pipe:function(h){return h.registerPrevious(this)},registerPrevious:function(h){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=h.streamInfo,this.mergeStreamInfo(),this.previous=h;var o=this;return h.on("data",function(a){o.processChunk(a)}),h.on("end",function(){o.end()}),h.on("error",function(a){o.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var h=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),h=!0),this.previous&&this.previous.resume(),!h},flush:function(){},processChunk:function(h){this.push(h)},withStreamInfo:function(h,o){return this.extraStreamInfo[h]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var h in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,h)&&(this.streamInfo[h]=this.extraStreamInfo[h])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var h="Worker "+this.name;return this.previous?this.previous+" -> "+h:h}},x.exports=c},{}],29:[function(d,x,v){var c=d("../utils"),h=d("./ConvertWorker"),o=d("./GenericWorker"),a=d("../base64"),m=d("../support"),p=d("../external"),f=null;if(m.nodestream)try{f=d("../nodejs/NodejsStreamOutputAdapter")}catch{}function e(s,i){return new p.Promise(function(l,u){var _=[],A=s._internalType,k=s._outputType,b=s._mimeType;s.on("data",function(I,C){_.push(I),i&&i(C)}).on("error",function(I){_=[],u(I)}).on("end",function(){try{var I=function(C,F,z){switch(C){case"blob":return c.newBlob(c.transformTo("arraybuffer",F),z);case"base64":return a.encode(F);default:return c.transformTo(C,F)}}(k,function(C,F){var z,W=0,q=null,g=0;for(z=0;z<F.length;z++)g+=F[z].length;switch(C){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(q=new Uint8Array(g),z=0;z<F.length;z++)q.set(F[z],W),W+=F[z].length;return q;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+C+"'")}}(A,_),b);l(I)}catch(C){u(C)}_=[]}).resume()})}function r(s,i,l){var u=i;switch(i){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=i,this._mimeType=l,c.checkSupport(u),this._worker=s.pipe(new h(u)),s.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}r.prototype={accumulate:function(s){return e(this,s)},on:function(s,i){var l=this;return s==="data"?this._worker.on(s,function(u){i.call(l,u.data,u.meta)}):this._worker.on(s,function(){c.delay(i,arguments,l)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(s){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},s)}},x.exports=r},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(d,x,v){if(v.base64=!0,v.array=!0,v.string=!0,v.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",v.nodebuffer=typeof Buffer<"u",v.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")v.blob=!1;else{var c=new ArrayBuffer(0);try{v.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);h.append(c),v.blob=h.getBlob("application/zip").size===0}catch{v.blob=!1}}}try{v.nodestream=!!d("readable-stream").Readable}catch{v.nodestream=!1}},{"readable-stream":16}],31:[function(d,x,v){for(var c=d("./utils"),h=d("./support"),o=d("./nodejsUtils"),a=d("./stream/GenericWorker"),m=new Array(256),p=0;p<256;p++)m[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;m[254]=m[254]=1;function f(){a.call(this,"utf-8 decode"),this.leftOver=null}function e(){a.call(this,"utf-8 encode")}v.utf8encode=function(r){return h.nodebuffer?o.newBufferFrom(r,"utf-8"):function(s){var i,l,u,_,A,k=s.length,b=0;for(_=0;_<k;_++)(64512&(l=s.charCodeAt(_)))==55296&&_+1<k&&(64512&(u=s.charCodeAt(_+1)))==56320&&(l=65536+(l-55296<<10)+(u-56320),_++),b+=l<128?1:l<2048?2:l<65536?3:4;for(i=h.uint8array?new Uint8Array(b):new Array(b),_=A=0;A<b;_++)(64512&(l=s.charCodeAt(_)))==55296&&_+1<k&&(64512&(u=s.charCodeAt(_+1)))==56320&&(l=65536+(l-55296<<10)+(u-56320),_++),l<128?i[A++]=l:(l<2048?i[A++]=192|l>>>6:(l<65536?i[A++]=224|l>>>12:(i[A++]=240|l>>>18,i[A++]=128|l>>>12&63),i[A++]=128|l>>>6&63),i[A++]=128|63&l);return i}(r)},v.utf8decode=function(r){return h.nodebuffer?c.transformTo("nodebuffer",r).toString("utf-8"):function(s){var i,l,u,_,A=s.length,k=new Array(2*A);for(i=l=0;i<A;)if((u=s[i++])<128)k[l++]=u;else if(4<(_=m[u]))k[l++]=65533,i+=_-1;else{for(u&=_===2?31:_===3?15:7;1<_&&i<A;)u=u<<6|63&s[i++],_--;1<_?k[l++]=65533:u<65536?k[l++]=u:(u-=65536,k[l++]=55296|u>>10&1023,k[l++]=56320|1023&u)}return k.length!==l&&(k.subarray?k=k.subarray(0,l):k.length=l),c.applyFromCharCode(k)}(r=c.transformTo(h.uint8array?"uint8array":"array",r))},c.inherits(f,a),f.prototype.processChunk=function(r){var s=c.transformTo(h.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var i=s;(s=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),s.set(i,this.leftOver.length)}else s=this.leftOver.concat(s);this.leftOver=null}var l=function(_,A){var k;for((A=A||_.length)>_.length&&(A=_.length),k=A-1;0<=k&&(192&_[k])==128;)k--;return k<0||k===0?A:k+m[_[k]]>A?k:A}(s),u=s;l!==s.length&&(h.uint8array?(u=s.subarray(0,l),this.leftOver=s.subarray(l,s.length)):(u=s.slice(0,l),this.leftOver=s.slice(l,s.length))),this.push({data:v.utf8decode(u),meta:r.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:v.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},v.Utf8DecodeWorker=f,c.inherits(e,a),e.prototype.processChunk=function(r){this.push({data:v.utf8encode(r.data),meta:r.meta})},v.Utf8EncodeWorker=e},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(d,x,v){var c=d("./support"),h=d("./base64"),o=d("./nodejsUtils"),a=d("./external");function m(i){return i}function p(i,l){for(var u=0;u<i.length;++u)l[u]=255&i.charCodeAt(u);return l}d("setimmediate"),v.newBlob=function(i,l){v.checkSupport("blob");try{return new Blob([i],{type:l})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(i),u.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(i,l,u){var _=[],A=0,k=i.length;if(k<=u)return String.fromCharCode.apply(null,i);for(;A<k;)l==="array"||l==="nodebuffer"?_.push(String.fromCharCode.apply(null,i.slice(A,Math.min(A+u,k)))):_.push(String.fromCharCode.apply(null,i.subarray(A,Math.min(A+u,k)))),A+=u;return _.join("")},stringifyByChar:function(i){for(var l="",u=0;u<i.length;u++)l+=String.fromCharCode(i[u]);return l},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function e(i){var l=65536,u=v.getTypeOf(i),_=!0;if(u==="uint8array"?_=f.applyCanBeUsed.uint8array:u==="nodebuffer"&&(_=f.applyCanBeUsed.nodebuffer),_)for(;1<l;)try{return f.stringifyByChunk(i,u,l)}catch{l=Math.floor(l/2)}return f.stringifyByChar(i)}function r(i,l){for(var u=0;u<i.length;u++)l[u]=i[u];return l}v.applyFromCharCode=e;var s={};s.string={string:m,array:function(i){return p(i,new Array(i.length))},arraybuffer:function(i){return s.string.uint8array(i).buffer},uint8array:function(i){return p(i,new Uint8Array(i.length))},nodebuffer:function(i){return p(i,o.allocBuffer(i.length))}},s.array={string:e,array:m,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return o.newBufferFrom(i)}},s.arraybuffer={string:function(i){return e(new Uint8Array(i))},array:function(i){return r(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:m,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return o.newBufferFrom(new Uint8Array(i))}},s.uint8array={string:e,array:function(i){return r(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:m,nodebuffer:function(i){return o.newBufferFrom(i)}},s.nodebuffer={string:e,array:function(i){return r(i,new Array(i.length))},arraybuffer:function(i){return s.nodebuffer.uint8array(i).buffer},uint8array:function(i){return r(i,new Uint8Array(i.length))},nodebuffer:m},v.transformTo=function(i,l){if(l=l||"",!i)return l;v.checkSupport(i);var u=v.getTypeOf(l);return s[u][i](l)},v.resolve=function(i){for(var l=i.split("/"),u=[],_=0;_<l.length;_++){var A=l[_];A==="."||A===""&&_!==0&&_!==l.length-1||(A===".."?u.pop():u.push(A))}return u.join("/")},v.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":c.nodebuffer&&o.isBuffer(i)?"nodebuffer":c.uint8array&&i instanceof Uint8Array?"uint8array":c.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},v.checkSupport=function(i){if(!c[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},v.MAX_VALUE_16BITS=65535,v.MAX_VALUE_32BITS=-1,v.pretty=function(i){var l,u,_="";for(u=0;u<(i||"").length;u++)_+="\\x"+((l=i.charCodeAt(u))<16?"0":"")+l.toString(16).toUpperCase();return _},v.delay=function(i,l,u){setImmediate(function(){i.apply(u||null,l||[])})},v.inherits=function(i,l){function u(){}u.prototype=l.prototype,i.prototype=new u},v.extend=function(){var i,l,u={};for(i=0;i<arguments.length;i++)for(l in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],l)&&u[l]===void 0&&(u[l]=arguments[i][l]);return u},v.prepareContent=function(i,l,u,_,A){return a.Promise.resolve(l).then(function(k){return c.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new a.Promise(function(b,I){var C=new FileReader;C.onload=function(F){b(F.target.result)},C.onerror=function(F){I(F.target.error)},C.readAsArrayBuffer(k)}):k}).then(function(k){var b=v.getTypeOf(k);return b?(b==="arraybuffer"?k=v.transformTo("uint8array",k):b==="string"&&(A?k=h.decode(k):u&&_!==!0&&(k=function(I){return p(I,c.uint8array?new Uint8Array(I.length):new Array(I.length))}(k))),k):a.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(d,x,v){var c=d("./reader/readerFor"),h=d("./utils"),o=d("./signature"),a=d("./zipEntry"),m=d("./support");function p(f){this.files=[],this.loadOptions=f}p.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+h.pretty(e)+", expected "+h.pretty(f)+")")}},isSignature:function(f,e){var r=this.reader.index;this.reader.setIndex(f);var s=this.reader.readString(4)===e;return this.reader.setIndex(r),s},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),e=m.uint8array?"uint8array":"array",r=h.transformTo(e,f);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,e,r,s=this.zip64EndOfCentralSize-44;0<s;)f=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[f]={id:f,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,e;for(f=0;f<this.files.length;f++)e=this.files[f],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var e=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var s=e-r;if(0<s)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=s);else if(s<0)throw new Error("Corrupted zip: missing "+Math.abs(s)+" bytes.")},prepareReader:function(f){this.reader=c(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},x.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(d,x,v){var c=d("./reader/readerFor"),h=d("./utils"),o=d("./compressedObject"),a=d("./crc32"),m=d("./utf8"),p=d("./compressions"),f=d("./support");function e(r,s){this.options=r,this.loadOptions=s}e.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(r){var s,i;if(r.skip(22),this.fileNameLength=r.readInt(2),i=r.readInt(2),this.fileName=r.readData(this.fileNameLength),r.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((s=function(l){for(var u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&p[u].magic===l)return p[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+h.pretty(this.compressionMethod)+" unknown (inner file : "+h.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,s,r.readData(this.compressedSize))},readCentralPart:function(r){this.versionMadeBy=r.readInt(2),r.skip(2),this.bitFlag=r.readInt(2),this.compressionMethod=r.readString(2),this.date=r.readDate(),this.crc32=r.readInt(4),this.compressedSize=r.readInt(4),this.uncompressedSize=r.readInt(4);var s=r.readInt(2);if(this.extraFieldsLength=r.readInt(2),this.fileCommentLength=r.readInt(2),this.diskNumberStart=r.readInt(2),this.internalFileAttributes=r.readInt(2),this.externalFileAttributes=r.readInt(4),this.localHeaderOffset=r.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");r.skip(s),this.readExtraFields(r),this.parseZIP64ExtraField(r),this.fileComment=r.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var r=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),r==0&&(this.dosPermissions=63&this.externalFileAttributes),r==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var r=c(this.extraFields[1].value);this.uncompressedSize===h.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===h.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===h.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===h.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(r){var s,i,l,u=r.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});r.index+4<u;)s=r.readInt(2),i=r.readInt(2),l=r.readData(i),this.extraFields[s]={id:s,length:i,value:l};r.setIndex(u)},handleUTF8:function(){var r=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var s=this.findExtraFieldUnicodePath();if(s!==null)this.fileNameStr=s;else{var i=h.transformTo(r,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var u=h.transformTo(r,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var r=this.extraFields[28789];if(r){var s=c(r.value);return s.readInt(1)!==1||a(this.fileName)!==s.readInt(4)?null:m.utf8decode(s.readData(r.length-5))}return null},findExtraFieldUnicodeComment:function(){var r=this.extraFields[25461];if(r){var s=c(r.value);return s.readInt(1)!==1||a(this.fileComment)!==s.readInt(4)?null:m.utf8decode(s.readData(r.length-5))}return null}},x.exports=e},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(d,x,v){function c(s,i,l){this.name=s,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=i,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var h=d("./stream/StreamHelper"),o=d("./stream/DataWorker"),a=d("./utf8"),m=d("./compressedObject"),p=d("./stream/GenericWorker");c.prototype={internalStream:function(s){var i=null,l="string";try{if(!s)throw new Error("No output type specified.");var u=(l=s.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),i=this._decompressWorker();var _=!this._dataBinary;_&&!u&&(i=i.pipe(new a.Utf8EncodeWorker)),!_&&u&&(i=i.pipe(new a.Utf8DecodeWorker))}catch(A){(i=new p("error")).error(A)}return new h(i,l,"")},async:function(s,i){return this.internalStream(s).accumulate(i)},nodeStream:function(s,i){return this.internalStream(s||"nodebuffer").toNodejsStream(i)},_compressWorker:function(s,i){if(this._data instanceof m&&this._data.compression.magic===s.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new a.Utf8EncodeWorker)),m.createWorkerFrom(l,s,i)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof p?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],e=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},r=0;r<f.length;r++)c.prototype[f[r]]=e;x.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(d,x,v){(function(c){var h,o,a=c.MutationObserver||c.WebKitMutationObserver;if(a){var m=0,p=new a(s),f=c.document.createTextNode("");p.observe(f,{characterData:!0}),h=function(){f.data=m=++m%2}}else if(c.setImmediate||c.MessageChannel===void 0)h="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var i=c.document.createElement("script");i.onreadystatechange=function(){s(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},c.document.documentElement.appendChild(i)}:function(){setTimeout(s,0)};else{var e=new c.MessageChannel;e.port1.onmessage=s,h=function(){e.port2.postMessage(0)}}var r=[];function s(){var i,l;o=!0;for(var u=r.length;u;){for(l=r,r=[],i=-1;++i<u;)l[i]();u=r.length}o=!1}x.exports=function(i){r.push(i)!==1||o||h()}}).call(this,typeof bt<"u"?bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(d,x,v){var c=d("immediate");function h(){}var o={},a=["REJECTED"],m=["FULFILLED"],p=["PENDING"];function f(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,u!==h&&i(this,u)}function e(u,_,A){this.promise=u,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function r(u,_,A){c(function(){var k;try{k=_(A)}catch(b){return o.reject(u,b)}k===u?o.reject(u,new TypeError("Cannot resolve promise with itself")):o.resolve(u,k)})}function s(u){var _=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof _=="function")return function(){_.apply(u,arguments)}}function i(u,_){var A=!1;function k(C){A||(A=!0,o.reject(u,C))}function b(C){A||(A=!0,o.resolve(u,C))}var I=l(function(){_(b,k)});I.status==="error"&&k(I.value)}function l(u,_){var A={};try{A.value=u(_),A.status="success"}catch(k){A.status="error",A.value=k}return A}(x.exports=f).prototype.finally=function(u){if(typeof u!="function")return this;var _=this.constructor;return this.then(function(A){return _.resolve(u()).then(function(){return A})},function(A){return _.resolve(u()).then(function(){throw A})})},f.prototype.catch=function(u){return this.then(null,u)},f.prototype.then=function(u,_){if(typeof u!="function"&&this.state===m||typeof _!="function"&&this.state===a)return this;var A=new this.constructor(h);return this.state!==p?r(A,this.state===m?u:_,this.outcome):this.queue.push(new e(A,u,_)),A},e.prototype.callFulfilled=function(u){o.resolve(this.promise,u)},e.prototype.otherCallFulfilled=function(u){r(this.promise,this.onFulfilled,u)},e.prototype.callRejected=function(u){o.reject(this.promise,u)},e.prototype.otherCallRejected=function(u){r(this.promise,this.onRejected,u)},o.resolve=function(u,_){var A=l(s,_);if(A.status==="error")return o.reject(u,A.value);var k=A.value;if(k)i(u,k);else{u.state=m,u.outcome=_;for(var b=-1,I=u.queue.length;++b<I;)u.queue[b].callFulfilled(_)}return u},o.reject=function(u,_){u.state=a,u.outcome=_;for(var A=-1,k=u.queue.length;++A<k;)u.queue[A].callRejected(_);return u},f.resolve=function(u){return u instanceof this?u:o.resolve(new this(h),u)},f.reject=function(u){var _=new this(h);return o.reject(_,u)},f.all=function(u){var _=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=u.length,k=!1;if(!A)return this.resolve([]);for(var b=new Array(A),I=0,C=-1,F=new this(h);++C<A;)z(u[C],C);return F;function z(W,q){_.resolve(W).then(function(g){b[q]=g,++I!==A||k||(k=!0,o.resolve(F,b))},function(g){k||(k=!0,o.reject(F,g))})}},f.race=function(u){var _=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=u.length,k=!1;if(!A)return this.resolve([]);for(var b=-1,I=new this(h);++b<A;)C=u[b],_.resolve(C).then(function(F){k||(k=!0,o.resolve(I,F))},function(F){k||(k=!0,o.reject(I,F))});var C;return I}},{immediate:36}],38:[function(d,x,v){var c={};(0,d("./lib/utils/common").assign)(c,d("./lib/deflate"),d("./lib/inflate"),d("./lib/zlib/constants")),x.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(d,x,v){var c=d("./zlib/deflate"),h=d("./utils/common"),o=d("./utils/strings"),a=d("./zlib/messages"),m=d("./zlib/zstream"),p=Object.prototype.toString,f=0,e=-1,r=0,s=8;function i(u){if(!(this instanceof i))return new i(u);this.options=h.assign({level:e,method:s,chunkSize:16384,windowBits:15,memLevel:8,strategy:r,to:""},u||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var A=c.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(A!==f)throw new Error(a[A]);if(_.header&&c.deflateSetHeader(this.strm,_.header),_.dictionary){var k;if(k=typeof _.dictionary=="string"?o.string2buf(_.dictionary):p.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(A=c.deflateSetDictionary(this.strm,k))!==f)throw new Error(a[A]);this._dict_set=!0}}function l(u,_){var A=new i(_);if(A.push(u,!0),A.err)throw A.msg||a[A.err];return A.result}i.prototype.push=function(u,_){var A,k,b=this.strm,I=this.options.chunkSize;if(this.ended)return!1;k=_===~~_?_:_===!0?4:0,typeof u=="string"?b.input=o.string2buf(u):p.call(u)==="[object ArrayBuffer]"?b.input=new Uint8Array(u):b.input=u,b.next_in=0,b.avail_in=b.input.length;do{if(b.avail_out===0&&(b.output=new h.Buf8(I),b.next_out=0,b.avail_out=I),(A=c.deflate(b,k))!==1&&A!==f)return this.onEnd(A),!(this.ended=!0);b.avail_out!==0&&(b.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(h.shrinkBuf(b.output,b.next_out))):this.onData(h.shrinkBuf(b.output,b.next_out)))}while((0<b.avail_in||b.avail_out===0)&&A!==1);return k===4?(A=c.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===f):k!==2||(this.onEnd(f),!(b.avail_out=0))},i.prototype.onData=function(u){this.chunks.push(u)},i.prototype.onEnd=function(u){u===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},v.Deflate=i,v.deflate=l,v.deflateRaw=function(u,_){return(_=_||{}).raw=!0,l(u,_)},v.gzip=function(u,_){return(_=_||{}).gzip=!0,l(u,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(d,x,v){var c=d("./zlib/inflate"),h=d("./utils/common"),o=d("./utils/strings"),a=d("./zlib/constants"),m=d("./zlib/messages"),p=d("./zlib/zstream"),f=d("./zlib/gzheader"),e=Object.prototype.toString;function r(i){if(!(this instanceof r))return new r(i);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},i||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||i&&i.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&!(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var u=c.inflateInit2(this.strm,l.windowBits);if(u!==a.Z_OK)throw new Error(m[u]);this.header=new f,c.inflateGetHeader(this.strm,this.header)}function s(i,l){var u=new r(l);if(u.push(i,!0),u.err)throw u.msg||m[u.err];return u.result}r.prototype.push=function(i,l){var u,_,A,k,b,I,C=this.strm,F=this.options.chunkSize,z=this.options.dictionary,W=!1;if(this.ended)return!1;_=l===~~l?l:l===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof i=="string"?C.input=o.binstring2buf(i):e.call(i)==="[object ArrayBuffer]"?C.input=new Uint8Array(i):C.input=i,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new h.Buf8(F),C.next_out=0,C.avail_out=F),(u=c.inflate(C,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&z&&(I=typeof z=="string"?o.string2buf(z):e.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,u=c.inflateSetDictionary(this.strm,I)),u===a.Z_BUF_ERROR&&W===!0&&(u=a.Z_OK,W=!1),u!==a.Z_STREAM_END&&u!==a.Z_OK)return this.onEnd(u),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&u!==a.Z_STREAM_END&&(C.avail_in!==0||_!==a.Z_FINISH&&_!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=o.utf8border(C.output,C.next_out),k=C.next_out-A,b=o.buf2string(C.output,A),C.next_out=k,C.avail_out=F-k,k&&h.arraySet(C.output,C.output,A,k,0),this.onData(b)):this.onData(h.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(W=!0)}while((0<C.avail_in||C.avail_out===0)&&u!==a.Z_STREAM_END);return u===a.Z_STREAM_END&&(_=a.Z_FINISH),_===a.Z_FINISH?(u=c.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===a.Z_OK):_!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(C.avail_out=0))},r.prototype.onData=function(i){this.chunks.push(i)},r.prototype.onEnd=function(i){i===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},v.Inflate=r,v.inflate=s,v.inflateRaw=function(i,l){return(l=l||{}).raw=!0,s(i,l)},v.ungzip=s},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(d,x,v){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";v.assign=function(a){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var p=m.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var f in p)p.hasOwnProperty(f)&&(a[f]=p[f])}}return a},v.shrinkBuf=function(a,m){return a.length===m?a:a.subarray?a.subarray(0,m):(a.length=m,a)};var h={arraySet:function(a,m,p,f,e){if(m.subarray&&a.subarray)a.set(m.subarray(p,p+f),e);else for(var r=0;r<f;r++)a[e+r]=m[p+r]},flattenChunks:function(a){var m,p,f,e,r,s;for(m=f=0,p=a.length;m<p;m++)f+=a[m].length;for(s=new Uint8Array(f),m=e=0,p=a.length;m<p;m++)r=a[m],s.set(r,e),e+=r.length;return s}},o={arraySet:function(a,m,p,f,e){for(var r=0;r<f;r++)a[e+r]=m[p+r]},flattenChunks:function(a){return[].concat.apply([],a)}};v.setTyped=function(a){a?(v.Buf8=Uint8Array,v.Buf16=Uint16Array,v.Buf32=Int32Array,v.assign(v,h)):(v.Buf8=Array,v.Buf16=Array,v.Buf32=Array,v.assign(v,o))},v.setTyped(c)},{}],42:[function(d,x,v){var c=d("./common"),h=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var a=new c.Buf8(256),m=0;m<256;m++)a[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function p(f,e){if(e<65537&&(f.subarray&&o||!f.subarray&&h))return String.fromCharCode.apply(null,c.shrinkBuf(f,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(f[s]);return r}a[254]=a[254]=1,v.string2buf=function(f){var e,r,s,i,l,u=f.length,_=0;for(i=0;i<u;i++)(64512&(r=f.charCodeAt(i)))==55296&&i+1<u&&(64512&(s=f.charCodeAt(i+1)))==56320&&(r=65536+(r-55296<<10)+(s-56320),i++),_+=r<128?1:r<2048?2:r<65536?3:4;for(e=new c.Buf8(_),i=l=0;l<_;i++)(64512&(r=f.charCodeAt(i)))==55296&&i+1<u&&(64512&(s=f.charCodeAt(i+1)))==56320&&(r=65536+(r-55296<<10)+(s-56320),i++),r<128?e[l++]=r:(r<2048?e[l++]=192|r>>>6:(r<65536?e[l++]=224|r>>>12:(e[l++]=240|r>>>18,e[l++]=128|r>>>12&63),e[l++]=128|r>>>6&63),e[l++]=128|63&r);return e},v.buf2binstring=function(f){return p(f,f.length)},v.binstring2buf=function(f){for(var e=new c.Buf8(f.length),r=0,s=e.length;r<s;r++)e[r]=f.charCodeAt(r);return e},v.buf2string=function(f,e){var r,s,i,l,u=e||f.length,_=new Array(2*u);for(r=s=0;r<u;)if((i=f[r++])<128)_[s++]=i;else if(4<(l=a[i]))_[s++]=65533,r+=l-1;else{for(i&=l===2?31:l===3?15:7;1<l&&r<u;)i=i<<6|63&f[r++],l--;1<l?_[s++]=65533:i<65536?_[s++]=i:(i-=65536,_[s++]=55296|i>>10&1023,_[s++]=56320|1023&i)}return p(_,s)},v.utf8border=function(f,e){var r;for((e=e||f.length)>f.length&&(e=f.length),r=e-1;0<=r&&(192&f[r])==128;)r--;return r<0||r===0?e:r+a[f[r]]>e?r:e}},{"./common":41}],43:[function(d,x,v){x.exports=function(c,h,o,a){for(var m=65535&c|0,p=c>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;p=p+(m=m+h[a++]|0)|0,--f;);m%=65521,p%=65521}return m|p<<16|0}},{}],44:[function(d,x,v){x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(d,x,v){var c=function(){for(var h,o=[],a=0;a<256;a++){h=a;for(var m=0;m<8;m++)h=1&h?3988292384^h>>>1:h>>>1;o[a]=h}return o}();x.exports=function(h,o,a,m){var p=c,f=m+a;h^=-1;for(var e=m;e<f;e++)h=h>>>8^p[255&(h^o[e])];return-1^h}},{}],46:[function(d,x,v){var c,h=d("../utils/common"),o=d("./trees"),a=d("./adler32"),m=d("./crc32"),p=d("./messages"),f=0,e=4,r=0,s=-2,i=-1,l=4,u=2,_=8,A=9,k=286,b=30,I=19,C=2*k+1,F=15,z=3,W=258,q=W+z+1,g=42,T=113,n=1,L=2,nt=3,j=4;function tt(t,U){return t.msg=p[U],U}function M(t){return(t<<1)-(4<t?9:0)}function Q(t){for(var U=t.length;0<=--U;)t[U]=0}function B(t){var U=t.state,D=U.pending;D>t.avail_out&&(D=t.avail_out),D!==0&&(h.arraySet(t.output,U.pending_buf,U.pending_out,D,t.next_out),t.next_out+=D,U.pending_out+=D,t.total_out+=D,t.avail_out-=D,U.pending-=D,U.pending===0&&(U.pending_out=0))}function P(t,U){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,U),t.block_start=t.strstart,B(t.strm)}function $(t,U){t.pending_buf[t.pending++]=U}function Y(t,U){t.pending_buf[t.pending++]=U>>>8&255,t.pending_buf[t.pending++]=255&U}function Z(t,U){var D,w,y=t.max_chain_length,O=t.strstart,N=t.prev_length,H=t.nice_match,R=t.strstart>t.w_size-q?t.strstart-(t.w_size-q):0,K=t.window,J=t.w_mask,V=t.prev,it=t.strstart+W,ut=K[O+N-1],st=K[O+N];t.prev_length>=t.good_match&&(y>>=2),H>t.lookahead&&(H=t.lookahead);do if(K[(D=U)+N]===st&&K[D+N-1]===ut&&K[D]===K[O]&&K[++D]===K[O+1]){O+=2,D++;do;while(K[++O]===K[++D]&&K[++O]===K[++D]&&K[++O]===K[++D]&&K[++O]===K[++D]&&K[++O]===K[++D]&&K[++O]===K[++D]&&K[++O]===K[++D]&&K[++O]===K[++D]&&O<it);if(w=W-(it-O),O=it-W,N<w){if(t.match_start=U,H<=(N=w))break;ut=K[O+N-1],st=K[O+N]}}while((U=V[U&J])>R&&--y!=0);return N<=t.lookahead?N:t.lookahead}function rt(t){var U,D,w,y,O,N,H,R,K,J,V=t.w_size;do{if(y=t.window_size-t.lookahead-t.strstart,t.strstart>=V+(V-q)){for(h.arraySet(t.window,t.window,V,V,0),t.match_start-=V,t.strstart-=V,t.block_start-=V,U=D=t.hash_size;w=t.head[--U],t.head[U]=V<=w?w-V:0,--D;);for(U=D=V;w=t.prev[--U],t.prev[U]=V<=w?w-V:0,--D;);y+=V}if(t.strm.avail_in===0)break;if(N=t.strm,H=t.window,R=t.strstart+t.lookahead,K=y,J=void 0,J=N.avail_in,K<J&&(J=K),D=J===0?0:(N.avail_in-=J,h.arraySet(H,N.input,N.next_in,J,R),N.state.wrap===1?N.adler=a(N.adler,H,J,R):N.state.wrap===2&&(N.adler=m(N.adler,H,J,R)),N.next_in+=J,N.total_in+=J,J),t.lookahead+=D,t.lookahead+t.insert>=z)for(O=t.strstart-t.insert,t.ins_h=t.window[O],t.ins_h=(t.ins_h<<t.hash_shift^t.window[O+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[O+z-1])&t.hash_mask,t.prev[O&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=O,O++,t.insert--,!(t.lookahead+t.insert<z)););}while(t.lookahead<q&&t.strm.avail_in!==0)}function et(t,U){for(var D,w;;){if(t.lookahead<q){if(rt(t),t.lookahead<q&&U===f)return n;if(t.lookahead===0)break}if(D=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),D!==0&&t.strstart-D<=t.w_size-q&&(t.match_length=Z(t,D)),t.match_length>=z)if(w=o._tr_tally(t,t.strstart-t.match_start,t.match_length-z),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=z){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else w=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(w&&(P(t,!1),t.strm.avail_out===0))return n}return t.insert=t.strstart<z-1?t.strstart:z-1,U===e?(P(t,!0),t.strm.avail_out===0?nt:j):t.last_lit&&(P(t,!1),t.strm.avail_out===0)?n:L}function X(t,U){for(var D,w,y;;){if(t.lookahead<q){if(rt(t),t.lookahead<q&&U===f)return n;if(t.lookahead===0)break}if(D=0,t.lookahead>=z&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=z-1,D!==0&&t.prev_length<t.max_lazy_match&&t.strstart-D<=t.w_size-q&&(t.match_length=Z(t,D),t.match_length<=5&&(t.strategy===1||t.match_length===z&&4096<t.strstart-t.match_start)&&(t.match_length=z-1)),t.prev_length>=z&&t.match_length<=t.prev_length){for(y=t.strstart+t.lookahead-z,w=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-z),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=y&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+z-1])&t.hash_mask,D=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=z-1,t.strstart++,w&&(P(t,!1),t.strm.avail_out===0))return n}else if(t.match_available){if((w=o._tr_tally(t,0,t.window[t.strstart-1]))&&P(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return n}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(w=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<z-1?t.strstart:z-1,U===e?(P(t,!0),t.strm.avail_out===0?nt:j):t.last_lit&&(P(t,!1),t.strm.avail_out===0)?n:L}function at(t,U,D,w,y){this.good_length=t,this.max_lazy=U,this.nice_length=D,this.max_chain=w,this.func=y}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*C),this.dyn_dtree=new h.Buf16(2*(2*b+1)),this.bl_tree=new h.Buf16(2*(2*I+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(F+1),this.heap=new h.Buf16(2*k+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*k+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(t){var U;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=u,(U=t.state).pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?g:T,t.adler=U.wrap===2?0:1,U.last_flush=f,o._tr_init(U),r):tt(t,s)}function mt(t){var U=ht(t);return U===r&&function(D){D.window_size=2*D.w_size,Q(D.head),D.max_lazy_match=c[D.level].max_lazy,D.good_match=c[D.level].good_length,D.nice_match=c[D.level].nice_length,D.max_chain_length=c[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=z-1,D.match_available=0,D.ins_h=0}(t.state),U}function pt(t,U,D,w,y,O){if(!t)return s;var N=1;if(U===i&&(U=6),w<0?(N=0,w=-w):15<w&&(N=2,w-=16),y<1||A<y||D!==_||w<8||15<w||U<0||9<U||O<0||l<O)return tt(t,s);w===8&&(w=9);var H=new ot;return(t.state=H).strm=t,H.wrap=N,H.gzhead=null,H.w_bits=w,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=y+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+z-1)/z),H.window=new h.Buf8(2*H.w_size),H.head=new h.Buf16(H.hash_size),H.prev=new h.Buf16(H.w_size),H.lit_bufsize=1<<y+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new h.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=U,H.strategy=O,H.method=D,mt(t)}c=[new at(0,0,0,0,function(t,U){var D=65535;for(D>t.pending_buf_size-5&&(D=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rt(t),t.lookahead===0&&U===f)return n;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var w=t.block_start+D;if((t.strstart===0||t.strstart>=w)&&(t.lookahead=t.strstart-w,t.strstart=w,P(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-q&&(P(t,!1),t.strm.avail_out===0))return n}return t.insert=0,U===e?(P(t,!0),t.strm.avail_out===0?nt:j):(t.strstart>t.block_start&&(P(t,!1),t.strm.avail_out),n)}),new at(4,4,8,4,et),new at(4,5,16,8,et),new at(4,6,32,32,et),new at(4,4,16,16,X),new at(8,16,32,32,X),new at(8,16,128,128,X),new at(8,32,128,256,X),new at(32,128,258,1024,X),new at(32,258,258,4096,X)],v.deflateInit=function(t,U){return pt(t,U,_,15,8,0)},v.deflateInit2=pt,v.deflateReset=mt,v.deflateResetKeep=ht,v.deflateSetHeader=function(t,U){return t&&t.state?t.state.wrap!==2?s:(t.state.gzhead=U,r):s},v.deflate=function(t,U){var D,w,y,O;if(!t||!t.state||5<U||U<0)return t?tt(t,s):s;if(w=t.state,!t.output||!t.input&&t.avail_in!==0||w.status===666&&U!==e)return tt(t,t.avail_out===0?-5:s);if(w.strm=t,D=w.last_flush,w.last_flush=U,w.status===g)if(w.wrap===2)t.adler=0,$(w,31),$(w,139),$(w,8),w.gzhead?($(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),$(w,255&w.gzhead.time),$(w,w.gzhead.time>>8&255),$(w,w.gzhead.time>>16&255),$(w,w.gzhead.time>>24&255),$(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),$(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&($(w,255&w.gzhead.extra.length),$(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(t.adler=m(t.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):($(w,0),$(w,0),$(w,0),$(w,0),$(w,0),$(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),$(w,3),w.status=T);else{var N=_+(w.w_bits-8<<4)<<8;N|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(N|=32),N+=31-N%31,w.status=T,Y(w,N),w.strstart!==0&&(Y(w,t.adler>>>16),Y(w,65535&t.adler)),t.adler=1}if(w.status===69)if(w.gzhead.extra){for(y=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>y&&(t.adler=m(t.adler,w.pending_buf,w.pending-y,y)),B(t),y=w.pending,w.pending!==w.pending_buf_size));)$(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>y&&(t.adler=m(t.adler,w.pending_buf,w.pending-y,y)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){y=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>y&&(t.adler=m(t.adler,w.pending_buf,w.pending-y,y)),B(t),y=w.pending,w.pending===w.pending_buf_size)){O=1;break}O=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,$(w,O)}while(O!==0);w.gzhead.hcrc&&w.pending>y&&(t.adler=m(t.adler,w.pending_buf,w.pending-y,y)),O===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){y=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>y&&(t.adler=m(t.adler,w.pending_buf,w.pending-y,y)),B(t),y=w.pending,w.pending===w.pending_buf_size)){O=1;break}O=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,$(w,O)}while(O!==0);w.gzhead.hcrc&&w.pending>y&&(t.adler=m(t.adler,w.pending_buf,w.pending-y,y)),O===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&B(t),w.pending+2<=w.pending_buf_size&&($(w,255&t.adler),$(w,t.adler>>8&255),t.adler=0,w.status=T)):w.status=T),w.pending!==0){if(B(t),t.avail_out===0)return w.last_flush=-1,r}else if(t.avail_in===0&&M(U)<=M(D)&&U!==e)return tt(t,-5);if(w.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||w.lookahead!==0||U!==f&&w.status!==666){var H=w.strategy===2?function(R,K){for(var J;;){if(R.lookahead===0&&(rt(R),R.lookahead===0)){if(K===f)return n;break}if(R.match_length=0,J=o._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,J&&(P(R,!1),R.strm.avail_out===0))return n}return R.insert=0,K===e?(P(R,!0),R.strm.avail_out===0?nt:j):R.last_lit&&(P(R,!1),R.strm.avail_out===0)?n:L}(w,U):w.strategy===3?function(R,K){for(var J,V,it,ut,st=R.window;;){if(R.lookahead<=W){if(rt(R),R.lookahead<=W&&K===f)return n;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=z&&0<R.strstart&&(V=st[it=R.strstart-1])===st[++it]&&V===st[++it]&&V===st[++it]){ut=R.strstart+W;do;while(V===st[++it]&&V===st[++it]&&V===st[++it]&&V===st[++it]&&V===st[++it]&&V===st[++it]&&V===st[++it]&&V===st[++it]&&it<ut);R.match_length=W-(ut-it),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=z?(J=o._tr_tally(R,1,R.match_length-z),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(J=o._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),J&&(P(R,!1),R.strm.avail_out===0))return n}return R.insert=0,K===e?(P(R,!0),R.strm.avail_out===0?nt:j):R.last_lit&&(P(R,!1),R.strm.avail_out===0)?n:L}(w,U):c[w.level].func(w,U);if(H!==nt&&H!==j||(w.status=666),H===n||H===nt)return t.avail_out===0&&(w.last_flush=-1),r;if(H===L&&(U===1?o._tr_align(w):U!==5&&(o._tr_stored_block(w,0,0,!1),U===3&&(Q(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),B(t),t.avail_out===0))return w.last_flush=-1,r}return U!==e?r:w.wrap<=0?1:(w.wrap===2?($(w,255&t.adler),$(w,t.adler>>8&255),$(w,t.adler>>16&255),$(w,t.adler>>24&255),$(w,255&t.total_in),$(w,t.total_in>>8&255),$(w,t.total_in>>16&255),$(w,t.total_in>>24&255)):(Y(w,t.adler>>>16),Y(w,65535&t.adler)),B(t),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?r:1)},v.deflateEnd=function(t){var U;return t&&t.state?(U=t.state.status)!==g&&U!==69&&U!==73&&U!==91&&U!==103&&U!==T&&U!==666?tt(t,s):(t.state=null,U===T?tt(t,-3):r):s},v.deflateSetDictionary=function(t,U){var D,w,y,O,N,H,R,K,J=U.length;if(!t||!t.state||(O=(D=t.state).wrap)===2||O===1&&D.status!==g||D.lookahead)return s;for(O===1&&(t.adler=a(t.adler,U,J,0)),D.wrap=0,J>=D.w_size&&(O===0&&(Q(D.head),D.strstart=0,D.block_start=0,D.insert=0),K=new h.Buf8(D.w_size),h.arraySet(K,U,J-D.w_size,D.w_size,0),U=K,J=D.w_size),N=t.avail_in,H=t.next_in,R=t.input,t.avail_in=J,t.next_in=0,t.input=U,rt(D);D.lookahead>=z;){for(w=D.strstart,y=D.lookahead-(z-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[w+z-1])&D.hash_mask,D.prev[w&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=w,w++,--y;);D.strstart=w,D.lookahead=z-1,rt(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=z-1,D.match_available=0,t.next_in=H,t.input=R,t.avail_in=N,D.wrap=O,r},v.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(d,x,v){x.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(d,x,v){x.exports=function(c,h){var o,a,m,p,f,e,r,s,i,l,u,_,A,k,b,I,C,F,z,W,q,g,T,n,L;o=c.state,a=c.next_in,n=c.input,m=a+(c.avail_in-5),p=c.next_out,L=c.output,f=p-(h-c.avail_out),e=p+(c.avail_out-257),r=o.dmax,s=o.wsize,i=o.whave,l=o.wnext,u=o.window,_=o.hold,A=o.bits,k=o.lencode,b=o.distcode,I=(1<<o.lenbits)-1,C=(1<<o.distbits)-1;t:do{A<15&&(_+=n[a++]<<A,A+=8,_+=n[a++]<<A,A+=8),F=k[_&I];r:for(;;){if(_>>>=z=F>>>24,A-=z,(z=F>>>16&255)===0)L[p++]=65535&F;else{if(!(16&z)){if(!(64&z)){F=k[(65535&F)+(_&(1<<z)-1)];continue r}if(32&z){o.mode=12;break t}c.msg="invalid literal/length code",o.mode=30;break t}W=65535&F,(z&=15)&&(A<z&&(_+=n[a++]<<A,A+=8),W+=_&(1<<z)-1,_>>>=z,A-=z),A<15&&(_+=n[a++]<<A,A+=8,_+=n[a++]<<A,A+=8),F=b[_&C];e:for(;;){if(_>>>=z=F>>>24,A-=z,!(16&(z=F>>>16&255))){if(!(64&z)){F=b[(65535&F)+(_&(1<<z)-1)];continue e}c.msg="invalid distance code",o.mode=30;break t}if(q=65535&F,A<(z&=15)&&(_+=n[a++]<<A,(A+=8)<z&&(_+=n[a++]<<A,A+=8)),r<(q+=_&(1<<z)-1)){c.msg="invalid distance too far back",o.mode=30;break t}if(_>>>=z,A-=z,(z=p-f)<q){if(i<(z=q-z)&&o.sane){c.msg="invalid distance too far back",o.mode=30;break t}if(T=u,(g=0)===l){if(g+=s-z,z<W){for(W-=z;L[p++]=u[g++],--z;);g=p-q,T=L}}else if(l<z){if(g+=s+l-z,(z-=l)<W){for(W-=z;L[p++]=u[g++],--z;);if(g=0,l<W){for(W-=z=l;L[p++]=u[g++],--z;);g=p-q,T=L}}}else if(g+=l-z,z<W){for(W-=z;L[p++]=u[g++],--z;);g=p-q,T=L}for(;2<W;)L[p++]=T[g++],L[p++]=T[g++],L[p++]=T[g++],W-=3;W&&(L[p++]=T[g++],1<W&&(L[p++]=T[g++]))}else{for(g=p-q;L[p++]=L[g++],L[p++]=L[g++],L[p++]=L[g++],2<(W-=3););W&&(L[p++]=L[g++],1<W&&(L[p++]=L[g++]))}break}}break}}while(a<m&&p<e);a-=W=A>>3,_&=(1<<(A-=W<<3))-1,c.next_in=a,c.next_out=p,c.avail_in=a<m?m-a+5:5-(a-m),c.avail_out=p<e?e-p+257:257-(p-e),o.hold=_,o.bits=A}},{}],49:[function(d,x,v){var c=d("../utils/common"),h=d("./adler32"),o=d("./crc32"),a=d("./inffast"),m=d("./inftrees"),p=1,f=2,e=0,r=-2,s=1,i=852,l=592;function u(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(g){var T;return g&&g.state?(T=g.state,g.total_in=g.total_out=T.total=0,g.msg="",T.wrap&&(g.adler=1&T.wrap),T.mode=s,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new c.Buf32(i),T.distcode=T.distdyn=new c.Buf32(l),T.sane=1,T.back=-1,e):r}function k(g){var T;return g&&g.state?((T=g.state).wsize=0,T.whave=0,T.wnext=0,A(g)):r}function b(g,T){var n,L;return g&&g.state?(L=g.state,T<0?(n=0,T=-T):(n=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?r:(L.window!==null&&L.wbits!==T&&(L.window=null),L.wrap=n,L.wbits=T,k(g))):r}function I(g,T){var n,L;return g?(L=new _,(g.state=L).window=null,(n=b(g,T))!==e&&(g.state=null),n):r}var C,F,z=!0;function W(g){if(z){var T;for(C=new c.Buf32(512),F=new c.Buf32(32),T=0;T<144;)g.lens[T++]=8;for(;T<256;)g.lens[T++]=9;for(;T<280;)g.lens[T++]=7;for(;T<288;)g.lens[T++]=8;for(m(p,g.lens,0,288,C,0,g.work,{bits:9}),T=0;T<32;)g.lens[T++]=5;m(f,g.lens,0,32,F,0,g.work,{bits:5}),z=!1}g.lencode=C,g.lenbits=9,g.distcode=F,g.distbits=5}function q(g,T,n,L){var nt,j=g.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new c.Buf8(j.wsize)),L>=j.wsize?(c.arraySet(j.window,T,n-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(L<(nt=j.wsize-j.wnext)&&(nt=L),c.arraySet(j.window,T,n-L,nt,j.wnext),(L-=nt)?(c.arraySet(j.window,T,n-L,L,0),j.wnext=L,j.whave=j.wsize):(j.wnext+=nt,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=nt))),0}v.inflateReset=k,v.inflateReset2=b,v.inflateResetKeep=A,v.inflateInit=function(g){return I(g,15)},v.inflateInit2=I,v.inflate=function(g,T){var n,L,nt,j,tt,M,Q,B,P,$,Y,Z,rt,et,X,at,ot,ht,mt,pt,t,U,D,w,y=0,O=new c.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return r;(n=g.state).mode===12&&(n.mode=13),tt=g.next_out,nt=g.output,Q=g.avail_out,j=g.next_in,L=g.input,M=g.avail_in,B=n.hold,P=n.bits,$=M,Y=Q,U=e;t:for(;;)switch(n.mode){case s:if(n.wrap===0){n.mode=13;break}for(;P<16;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(2&n.wrap&&B===35615){O[n.check=0]=255&B,O[1]=B>>>8&255,n.check=o(n.check,O,2,0),P=B=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&B)<<8)+(B>>8))%31){g.msg="incorrect header check",n.mode=30;break}if((15&B)!=8){g.msg="unknown compression method",n.mode=30;break}if(P-=4,t=8+(15&(B>>>=4)),n.wbits===0)n.wbits=t;else if(t>n.wbits){g.msg="invalid window size",n.mode=30;break}n.dmax=1<<t,g.adler=n.check=1,n.mode=512&B?10:12,P=B=0;break;case 2:for(;P<16;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(n.flags=B,(255&n.flags)!=8){g.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){g.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=B>>8&1),512&n.flags&&(O[0]=255&B,O[1]=B>>>8&255,n.check=o(n.check,O,2,0)),P=B=0,n.mode=3;case 3:for(;P<32;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}n.head&&(n.head.time=B),512&n.flags&&(O[0]=255&B,O[1]=B>>>8&255,O[2]=B>>>16&255,O[3]=B>>>24&255,n.check=o(n.check,O,4,0)),P=B=0,n.mode=4;case 4:for(;P<16;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}n.head&&(n.head.xflags=255&B,n.head.os=B>>8),512&n.flags&&(O[0]=255&B,O[1]=B>>>8&255,n.check=o(n.check,O,2,0)),P=B=0,n.mode=5;case 5:if(1024&n.flags){for(;P<16;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}n.length=B,n.head&&(n.head.extra_len=B),512&n.flags&&(O[0]=255&B,O[1]=B>>>8&255,n.check=o(n.check,O,2,0)),P=B=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(M<(Z=n.length)&&(Z=M),Z&&(n.head&&(t=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),c.arraySet(n.head.extra,L,j,Z,t)),512&n.flags&&(n.check=o(n.check,L,Z,j)),M-=Z,j+=Z,n.length-=Z),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(M===0)break t;for(Z=0;t=L[j+Z++],n.head&&t&&n.length<65536&&(n.head.name+=String.fromCharCode(t)),t&&Z<M;);if(512&n.flags&&(n.check=o(n.check,L,Z,j)),M-=Z,j+=Z,t)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(M===0)break t;for(Z=0;t=L[j+Z++],n.head&&t&&n.length<65536&&(n.head.comment+=String.fromCharCode(t)),t&&Z<M;);if(512&n.flags&&(n.check=o(n.check,L,Z,j)),M-=Z,j+=Z,t)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;P<16;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(B!==(65535&n.check)){g.msg="header crc mismatch",n.mode=30;break}P=B=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),g.adler=n.check=0,n.mode=12;break;case 10:for(;P<32;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}g.adler=n.check=u(B),P=B=0,n.mode=11;case 11:if(n.havedict===0)return g.next_out=tt,g.avail_out=Q,g.next_in=j,g.avail_in=M,n.hold=B,n.bits=P,2;g.adler=n.check=1,n.mode=12;case 12:if(T===5||T===6)break t;case 13:if(n.last){B>>>=7&P,P-=7&P,n.mode=27;break}for(;P<3;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}switch(n.last=1&B,P-=1,3&(B>>>=1)){case 0:n.mode=14;break;case 1:if(W(n),n.mode=20,T!==6)break;B>>>=2,P-=2;break t;case 2:n.mode=17;break;case 3:g.msg="invalid block type",n.mode=30}B>>>=2,P-=2;break;case 14:for(B>>>=7&P,P-=7&P;P<32;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if((65535&B)!=(B>>>16^65535)){g.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&B,P=B=0,n.mode=15,T===6)break t;case 15:n.mode=16;case 16:if(Z=n.length){if(M<Z&&(Z=M),Q<Z&&(Z=Q),Z===0)break t;c.arraySet(nt,L,j,Z,tt),M-=Z,j+=Z,Q-=Z,tt+=Z,n.length-=Z;break}n.mode=12;break;case 17:for(;P<14;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(n.nlen=257+(31&B),B>>>=5,P-=5,n.ndist=1+(31&B),B>>>=5,P-=5,n.ncode=4+(15&B),B>>>=4,P-=4,286<n.nlen||30<n.ndist){g.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;P<3;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}n.lens[N[n.have++]]=7&B,B>>>=3,P-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},U=m(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,U){g.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;at=(y=n.lencode[B&(1<<n.lenbits)-1])>>>16&255,ot=65535&y,!((X=y>>>24)<=P);){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(ot<16)B>>>=X,P-=X,n.lens[n.have++]=ot;else{if(ot===16){for(w=X+2;P<w;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(B>>>=X,P-=X,n.have===0){g.msg="invalid bit length repeat",n.mode=30;break}t=n.lens[n.have-1],Z=3+(3&B),B>>>=2,P-=2}else if(ot===17){for(w=X+3;P<w;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}P-=X,t=0,Z=3+(7&(B>>>=X)),B>>>=3,P-=3}else{for(w=X+7;P<w;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}P-=X,t=0,Z=11+(127&(B>>>=X)),B>>>=7,P-=7}if(n.have+Z>n.nlen+n.ndist){g.msg="invalid bit length repeat",n.mode=30;break}for(;Z--;)n.lens[n.have++]=t}}if(n.mode===30)break;if(n.lens[256]===0){g.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},U=m(p,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,U){g.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},U=m(f,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,U){g.msg="invalid distances set",n.mode=30;break}if(n.mode=20,T===6)break t;case 20:n.mode=21;case 21:if(6<=M&&258<=Q){g.next_out=tt,g.avail_out=Q,g.next_in=j,g.avail_in=M,n.hold=B,n.bits=P,a(g,Y),tt=g.next_out,nt=g.output,Q=g.avail_out,j=g.next_in,L=g.input,M=g.avail_in,B=n.hold,P=n.bits,n.mode===12&&(n.back=-1);break}for(n.back=0;at=(y=n.lencode[B&(1<<n.lenbits)-1])>>>16&255,ot=65535&y,!((X=y>>>24)<=P);){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(at&&!(240&at)){for(ht=X,mt=at,pt=ot;at=(y=n.lencode[pt+((B&(1<<ht+mt)-1)>>ht)])>>>16&255,ot=65535&y,!(ht+(X=y>>>24)<=P);){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}B>>>=ht,P-=ht,n.back+=ht}if(B>>>=X,P-=X,n.back+=X,n.length=ot,at===0){n.mode=26;break}if(32&at){n.back=-1,n.mode=12;break}if(64&at){g.msg="invalid literal/length code",n.mode=30;break}n.extra=15&at,n.mode=22;case 22:if(n.extra){for(w=n.extra;P<w;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}n.length+=B&(1<<n.extra)-1,B>>>=n.extra,P-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;at=(y=n.distcode[B&(1<<n.distbits)-1])>>>16&255,ot=65535&y,!((X=y>>>24)<=P);){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(!(240&at)){for(ht=X,mt=at,pt=ot;at=(y=n.distcode[pt+((B&(1<<ht+mt)-1)>>ht)])>>>16&255,ot=65535&y,!(ht+(X=y>>>24)<=P);){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}B>>>=ht,P-=ht,n.back+=ht}if(B>>>=X,P-=X,n.back+=X,64&at){g.msg="invalid distance code",n.mode=30;break}n.offset=ot,n.extra=15&at,n.mode=24;case 24:if(n.extra){for(w=n.extra;P<w;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}n.offset+=B&(1<<n.extra)-1,B>>>=n.extra,P-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){g.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(Q===0)break t;if(Z=Y-Q,n.offset>Z){if((Z=n.offset-Z)>n.whave&&n.sane){g.msg="invalid distance too far back",n.mode=30;break}rt=Z>n.wnext?(Z-=n.wnext,n.wsize-Z):n.wnext-Z,Z>n.length&&(Z=n.length),et=n.window}else et=nt,rt=tt-n.offset,Z=n.length;for(Q<Z&&(Z=Q),Q-=Z,n.length-=Z;nt[tt++]=et[rt++],--Z;);n.length===0&&(n.mode=21);break;case 26:if(Q===0)break t;nt[tt++]=n.length,Q--,n.mode=21;break;case 27:if(n.wrap){for(;P<32;){if(M===0)break t;M--,B|=L[j++]<<P,P+=8}if(Y-=Q,g.total_out+=Y,n.total+=Y,Y&&(g.adler=n.check=n.flags?o(n.check,nt,Y,tt-Y):h(n.check,nt,Y,tt-Y)),Y=Q,(n.flags?B:u(B))!==n.check){g.msg="incorrect data check",n.mode=30;break}P=B=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;P<32;){if(M===0)break t;M--,B+=L[j++]<<P,P+=8}if(B!==(4294967295&n.total)){g.msg="incorrect length check",n.mode=30;break}P=B=0}n.mode=29;case 29:U=1;break t;case 30:U=-3;break t;case 31:return-4;case 32:default:return r}return g.next_out=tt,g.avail_out=Q,g.next_in=j,g.avail_in=M,n.hold=B,n.bits=P,(n.wsize||Y!==g.avail_out&&n.mode<30&&(n.mode<27||T!==4))&&q(g,g.output,g.next_out,Y-g.avail_out)?(n.mode=31,-4):($-=g.avail_in,Y-=g.avail_out,g.total_in+=$,g.total_out+=Y,n.total+=Y,n.wrap&&Y&&(g.adler=n.check=n.flags?o(n.check,nt,Y,g.next_out-Y):h(n.check,nt,Y,g.next_out-Y)),g.data_type=n.bits+(n.last?64:0)+(n.mode===12?128:0)+(n.mode===20||n.mode===15?256:0),($==0&&Y===0||T===4)&&U===e&&(U=-5),U)},v.inflateEnd=function(g){if(!g||!g.state)return r;var T=g.state;return T.window&&(T.window=null),g.state=null,e},v.inflateGetHeader=function(g,T){var n;return g&&g.state&&2&(n=g.state).wrap?((n.head=T).done=!1,e):r},v.inflateSetDictionary=function(g,T){var n,L=T.length;return g&&g.state?(n=g.state).wrap!==0&&n.mode!==11?r:n.mode===11&&h(1,T,L,0)!==n.check?-3:q(g,T,L,L)?(n.mode=31,-4):(n.havedict=1,e):r},v.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(d,x,v){var c=d("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];x.exports=function(p,f,e,r,s,i,l,u){var _,A,k,b,I,C,F,z,W,q=u.bits,g=0,T=0,n=0,L=0,nt=0,j=0,tt=0,M=0,Q=0,B=0,P=null,$=0,Y=new c.Buf16(16),Z=new c.Buf16(16),rt=null,et=0;for(g=0;g<=15;g++)Y[g]=0;for(T=0;T<r;T++)Y[f[e+T]]++;for(nt=q,L=15;1<=L&&Y[L]===0;L--);if(L<nt&&(nt=L),L===0)return s[i++]=20971520,s[i++]=20971520,u.bits=1,0;for(n=1;n<L&&Y[n]===0;n++);for(nt<n&&(nt=n),g=M=1;g<=15;g++)if(M<<=1,(M-=Y[g])<0)return-1;if(0<M&&(p===0||L!==1))return-1;for(Z[1]=0,g=1;g<15;g++)Z[g+1]=Z[g]+Y[g];for(T=0;T<r;T++)f[e+T]!==0&&(l[Z[f[e+T]]++]=T);if(C=p===0?(P=rt=l,19):p===1?(P=h,$-=257,rt=o,et-=257,256):(P=a,rt=m,-1),g=n,I=i,tt=T=B=0,k=-1,b=(Q=1<<(j=nt))-1,p===1&&852<Q||p===2&&592<Q)return 1;for(;;){for(F=g-tt,W=l[T]<C?(z=0,l[T]):l[T]>C?(z=rt[et+l[T]],P[$+l[T]]):(z=96,0),_=1<<g-tt,n=A=1<<j;s[I+(B>>tt)+(A-=_)]=F<<24|z<<16|W|0,A!==0;);for(_=1<<g-1;B&_;)_>>=1;if(_!==0?(B&=_-1,B+=_):B=0,T++,--Y[g]==0){if(g===L)break;g=f[e+l[T]]}if(nt<g&&(B&b)!==k){for(tt===0&&(tt=nt),I+=n,M=1<<(j=g-tt);j+tt<L&&!((M-=Y[j+tt])<=0);)j++,M<<=1;if(Q+=1<<j,p===1&&852<Q||p===2&&592<Q)return 1;s[k=B&b]=nt<<24|j<<16|I-i|0}}return B!==0&&(s[I+B]=g-tt<<24|64<<16|0),u.bits=nt,0}},{"../utils/common":41}],51:[function(d,x,v){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(d,x,v){var c=d("../utils/common"),h=0,o=1;function a(y){for(var O=y.length;0<=--O;)y[O]=0}var m=0,p=29,f=256,e=f+1+p,r=30,s=19,i=2*e+1,l=15,u=16,_=7,A=256,k=16,b=17,I=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(e+2));a(q);var g=new Array(2*r);a(g);var T=new Array(512);a(T);var n=new Array(256);a(n);var L=new Array(p);a(L);var nt,j,tt,M=new Array(r);function Q(y,O,N,H,R){this.static_tree=y,this.extra_bits=O,this.extra_base=N,this.elems=H,this.max_length=R,this.has_stree=y&&y.length}function B(y,O){this.dyn_tree=y,this.max_code=0,this.stat_desc=O}function P(y){return y<256?T[y]:T[256+(y>>>7)]}function $(y,O){y.pending_buf[y.pending++]=255&O,y.pending_buf[y.pending++]=O>>>8&255}function Y(y,O,N){y.bi_valid>u-N?(y.bi_buf|=O<<y.bi_valid&65535,$(y,y.bi_buf),y.bi_buf=O>>u-y.bi_valid,y.bi_valid+=N-u):(y.bi_buf|=O<<y.bi_valid&65535,y.bi_valid+=N)}function Z(y,O,N){Y(y,N[2*O],N[2*O+1])}function rt(y,O){for(var N=0;N|=1&y,y>>>=1,N<<=1,0<--O;);return N>>>1}function et(y,O,N){var H,R,K=new Array(l+1),J=0;for(H=1;H<=l;H++)K[H]=J=J+N[H-1]<<1;for(R=0;R<=O;R++){var V=y[2*R+1];V!==0&&(y[2*R]=rt(K[V]++,V))}}function X(y){var O;for(O=0;O<e;O++)y.dyn_ltree[2*O]=0;for(O=0;O<r;O++)y.dyn_dtree[2*O]=0;for(O=0;O<s;O++)y.bl_tree[2*O]=0;y.dyn_ltree[2*A]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function at(y){8<y.bi_valid?$(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function ot(y,O,N,H){var R=2*O,K=2*N;return y[R]<y[K]||y[R]===y[K]&&H[O]<=H[N]}function ht(y,O,N){for(var H=y.heap[N],R=N<<1;R<=y.heap_len&&(R<y.heap_len&&ot(O,y.heap[R+1],y.heap[R],y.depth)&&R++,!ot(O,H,y.heap[R],y.depth));)y.heap[N]=y.heap[R],N=R,R<<=1;y.heap[N]=H}function mt(y,O,N){var H,R,K,J,V=0;if(y.last_lit!==0)for(;H=y.pending_buf[y.d_buf+2*V]<<8|y.pending_buf[y.d_buf+2*V+1],R=y.pending_buf[y.l_buf+V],V++,H===0?Z(y,R,O):(Z(y,(K=n[R])+f+1,O),(J=C[K])!==0&&Y(y,R-=L[K],J),Z(y,K=P(--H),N),(J=F[K])!==0&&Y(y,H-=M[K],J)),V<y.last_lit;);Z(y,A,O)}function pt(y,O){var N,H,R,K=O.dyn_tree,J=O.stat_desc.static_tree,V=O.stat_desc.has_stree,it=O.stat_desc.elems,ut=-1;for(y.heap_len=0,y.heap_max=i,N=0;N<it;N++)K[2*N]!==0?(y.heap[++y.heap_len]=ut=N,y.depth[N]=0):K[2*N+1]=0;for(;y.heap_len<2;)K[2*(R=y.heap[++y.heap_len]=ut<2?++ut:0)]=1,y.depth[R]=0,y.opt_len--,V&&(y.static_len-=J[2*R+1]);for(O.max_code=ut,N=y.heap_len>>1;1<=N;N--)ht(y,K,N);for(R=it;N=y.heap[1],y.heap[1]=y.heap[y.heap_len--],ht(y,K,1),H=y.heap[1],y.heap[--y.heap_max]=N,y.heap[--y.heap_max]=H,K[2*R]=K[2*N]+K[2*H],y.depth[R]=(y.depth[N]>=y.depth[H]?y.depth[N]:y.depth[H])+1,K[2*N+1]=K[2*H+1]=R,y.heap[1]=R++,ht(y,K,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],function(st,ft){var kt,yt,At,ct,Ot,Pt,wt=ft.dyn_tree,Wt=ft.max_code,hr=ft.stat_desc.static_tree,ur=ft.stat_desc.has_stree,lr=ft.stat_desc.extra_bits,jt=ft.stat_desc.extra_base,St=ft.stat_desc.max_length,Ct=0;for(ct=0;ct<=l;ct++)st.bl_count[ct]=0;for(wt[2*st.heap[st.heap_max]+1]=0,kt=st.heap_max+1;kt<i;kt++)St<(ct=wt[2*wt[2*(yt=st.heap[kt])+1]+1]+1)&&(ct=St,Ct++),wt[2*yt+1]=ct,Wt<yt||(st.bl_count[ct]++,Ot=0,jt<=yt&&(Ot=lr[yt-jt]),Pt=wt[2*yt],st.opt_len+=Pt*(ct+Ot),ur&&(st.static_len+=Pt*(hr[2*yt+1]+Ot)));if(Ct!==0){do{for(ct=St-1;st.bl_count[ct]===0;)ct--;st.bl_count[ct]--,st.bl_count[ct+1]+=2,st.bl_count[St]--,Ct-=2}while(0<Ct);for(ct=St;ct!==0;ct--)for(yt=st.bl_count[ct];yt!==0;)Wt<(At=st.heap[--kt])||(wt[2*At+1]!==ct&&(st.opt_len+=(ct-wt[2*At+1])*wt[2*At],wt[2*At+1]=ct),yt--)}}(y,O),et(K,ut,y.bl_count)}function t(y,O,N){var H,R,K=-1,J=O[1],V=0,it=7,ut=4;for(J===0&&(it=138,ut=3),O[2*(N+1)+1]=65535,H=0;H<=N;H++)R=J,J=O[2*(H+1)+1],++V<it&&R===J||(V<ut?y.bl_tree[2*R]+=V:R!==0?(R!==K&&y.bl_tree[2*R]++,y.bl_tree[2*k]++):V<=10?y.bl_tree[2*b]++:y.bl_tree[2*I]++,K=R,ut=(V=0)===J?(it=138,3):R===J?(it=6,3):(it=7,4))}function U(y,O,N){var H,R,K=-1,J=O[1],V=0,it=7,ut=4;for(J===0&&(it=138,ut=3),H=0;H<=N;H++)if(R=J,J=O[2*(H+1)+1],!(++V<it&&R===J)){if(V<ut)for(;Z(y,R,y.bl_tree),--V!=0;);else R!==0?(R!==K&&(Z(y,R,y.bl_tree),V--),Z(y,k,y.bl_tree),Y(y,V-3,2)):V<=10?(Z(y,b,y.bl_tree),Y(y,V-3,3)):(Z(y,I,y.bl_tree),Y(y,V-11,7));K=R,ut=(V=0)===J?(it=138,3):R===J?(it=6,3):(it=7,4)}}a(M);var D=!1;function w(y,O,N,H){Y(y,(m<<1)+(H?1:0),3),function(R,K,J,V){at(R),$(R,J),$(R,~J),c.arraySet(R.pending_buf,R.window,K,J,R.pending),R.pending+=J}(y,O,N)}v._tr_init=function(y){D||(function(){var O,N,H,R,K,J=new Array(l+1);for(R=H=0;R<p-1;R++)for(L[R]=H,O=0;O<1<<C[R];O++)n[H++]=R;for(n[H-1]=R,R=K=0;R<16;R++)for(M[R]=K,O=0;O<1<<F[R];O++)T[K++]=R;for(K>>=7;R<r;R++)for(M[R]=K<<7,O=0;O<1<<F[R]-7;O++)T[256+K++]=R;for(N=0;N<=l;N++)J[N]=0;for(O=0;O<=143;)q[2*O+1]=8,O++,J[8]++;for(;O<=255;)q[2*O+1]=9,O++,J[9]++;for(;O<=279;)q[2*O+1]=7,O++,J[7]++;for(;O<=287;)q[2*O+1]=8,O++,J[8]++;for(et(q,e+1,J),O=0;O<r;O++)g[2*O+1]=5,g[2*O]=rt(O,5);nt=new Q(q,C,f+1,e,l),j=new Q(g,F,0,r,l),tt=new Q(new Array(0),z,0,s,_)}(),D=!0),y.l_desc=new B(y.dyn_ltree,nt),y.d_desc=new B(y.dyn_dtree,j),y.bl_desc=new B(y.bl_tree,tt),y.bi_buf=0,y.bi_valid=0,X(y)},v._tr_stored_block=w,v._tr_flush_block=function(y,O,N,H){var R,K,J=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=function(V){var it,ut=4093624447;for(it=0;it<=31;it++,ut>>>=1)if(1&ut&&V.dyn_ltree[2*it]!==0)return h;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return o;for(it=32;it<f;it++)if(V.dyn_ltree[2*it]!==0)return o;return h}(y)),pt(y,y.l_desc),pt(y,y.d_desc),J=function(V){var it;for(t(V,V.dyn_ltree,V.l_desc.max_code),t(V,V.dyn_dtree,V.d_desc.max_code),pt(V,V.bl_desc),it=s-1;3<=it&&V.bl_tree[2*W[it]+1]===0;it--);return V.opt_len+=3*(it+1)+5+5+4,it}(y),R=y.opt_len+3+7>>>3,(K=y.static_len+3+7>>>3)<=R&&(R=K)):R=K=N+5,N+4<=R&&O!==-1?w(y,O,N,H):y.strategy===4||K===R?(Y(y,2+(H?1:0),3),mt(y,q,g)):(Y(y,4+(H?1:0),3),function(V,it,ut,st){var ft;for(Y(V,it-257,5),Y(V,ut-1,5),Y(V,st-4,4),ft=0;ft<st;ft++)Y(V,V.bl_tree[2*W[ft]+1],3);U(V,V.dyn_ltree,it-1),U(V,V.dyn_dtree,ut-1)}(y,y.l_desc.max_code+1,y.d_desc.max_code+1,J+1),mt(y,y.dyn_ltree,y.dyn_dtree)),X(y),H&&at(y)},v._tr_tally=function(y,O,N){return y.pending_buf[y.d_buf+2*y.last_lit]=O>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&O,y.pending_buf[y.l_buf+y.last_lit]=255&N,y.last_lit++,O===0?y.dyn_ltree[2*N]++:(y.matches++,O--,y.dyn_ltree[2*(n[N]+f+1)]++,y.dyn_dtree[2*P(O)]++),y.last_lit===y.lit_bufsize-1},v._tr_align=function(y){Y(y,2,3),Z(y,A,q),function(O){O.bi_valid===16?($(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(y)}},{"../utils/common":41}],53:[function(d,x,v){x.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(d,x,v){(function(c){(function(h,o){if(!h.setImmediate){var a,m,p,f,e=1,r={},s=!1,i=h.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(h);l=l&&l.setTimeout?l:h,a={}.toString.call(h.process)==="[object process]"?function(k){process.nextTick(function(){_(k)})}:function(){if(h.postMessage&&!h.importScripts){var k=!0,b=h.onmessage;return h.onmessage=function(){k=!1},h.postMessage("","*"),h.onmessage=b,k}}()?(f="setImmediate$"+Math.random()+"$",h.addEventListener?h.addEventListener("message",A,!1):h.attachEvent("onmessage",A),function(k){h.postMessage(f+k,"*")}):h.MessageChannel?((p=new MessageChannel).port1.onmessage=function(k){_(k.data)},function(k){p.port2.postMessage(k)}):i&&"onreadystatechange"in i.createElement("script")?(m=i.documentElement,function(k){var b=i.createElement("script");b.onreadystatechange=function(){_(k),b.onreadystatechange=null,m.removeChild(b),b=null},m.appendChild(b)}):function(k){setTimeout(_,0,k)},l.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var b=new Array(arguments.length-1),I=0;I<b.length;I++)b[I]=arguments[I+1];var C={callback:k,args:b};return r[e]=C,a(e),e++},l.clearImmediate=u}function u(k){delete r[k]}function _(k){if(s)setTimeout(_,0,k);else{var b=r[k];if(b){s=!0;try{(function(I){var C=I.callback,F=I.args;switch(F.length){case 0:C();break;case 1:C(F[0]);break;case 2:C(F[0],F[1]);break;case 3:C(F[0],F[1],F[2]);break;default:C.apply(o,F)}})(b)}finally{u(k),s=!1}}}}function A(k){k.source===h&&typeof k.data=="string"&&k.data.indexOf(f)===0&&_(+k.data.slice(f.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof bt<"u"?bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(tr);var fr=tr.exports;const Wr=$t(fr);var rr={exports:{}};(function(S,E){(function(d,x){x()})(bt,function(){function d(m,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function x(m,p,f){var e=new XMLHttpRequest;e.open("GET",m),e.responseType="blob",e.onload=function(){a(e.response,p,f)},e.onerror=function(){console.error("could not download file")},e.send()}function v(m){var p=new XMLHttpRequest;p.open("HEAD",m,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(p)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof bt=="object"&&bt.global===bt?bt:void 0,o=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(m,p,f){var e=h.URL||h.webkitURL,r=document.createElement("a");p=p||m.name||"download",r.download=p,r.rel="noopener",typeof m=="string"?(r.href=m,r.origin===location.origin?c(r):v(r.href)?x(m,p,f):c(r,r.target="_blank")):(r.href=e.createObjectURL(m),setTimeout(function(){e.revokeObjectURL(r.href)},4e4),setTimeout(function(){c(r)},0))}:"msSaveOrOpenBlob"in navigator?function(m,p,f){if(p=p||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(d(m,f),p);else if(v(m))x(m,p,f);else{var e=document.createElement("a");e.href=m,e.target="_blank",setTimeout(function(){c(e)})}}:function(m,p,f,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),typeof m=="string")return x(m,p,f);var r=m.type==="application/octet-stream",s=/constructor/i.test(h.HTMLElement)||h.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||r&&s||o)&&typeof FileReader<"u"){var l=new FileReader;l.onloadend=function(){var A=l.result;A=i?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=A:location=A,e=null},l.readAsDataURL(m)}else{var u=h.URL||h.webkitURL,_=u.createObjectURL(m);e?e.location=_:location.href=_,e=null,setTimeout(function(){u.revokeObjectURL(_)},4e4)}});h.saveAs=a.saveAs=a,S.exports=a})})(rr);var jr=rr.exports;function Ut(S,E){this.x=S||0,this.y=E||0}Ut.prototype={copy:function(){return new Ut(this.x,this.y)}};var Rt=Ut,Nt=Rt,zt={};function cr(S){return zt[S]||(zt[S]=new RegExp(" "+S+'="((?:\\\\(?=")"|[^"])+)"',"i")),zt[S]}function dr(S,E,d){var x=" "+E+'="'+d+'"';return S.indexOf(" "+E+'="')===-1?S=S.replace(/<[a-z]+/i,function(v){return v+x}):S=S.replace(cr(E),x),S}function gt(S){return S.toFixed(3).replace(".000","")}function pr(S,E){return S>=E?S%E:S>=0?S:E-1-(-1-S)%E}function mr(S,E){return S.x*E.y-S.y*E.x}function _r(S,E,d){return S<=d?S<=E&&E<d:S<=E||E<d}function Ft(S){return S>0?1:S<0?-1:0}function gr(S,E){var d=new Array(3),x,v,c;for(d[0]=E.x,d[1]=E.y,d[2]=1,c=0,x=0;x<3;x++)for(v=0;v<3;v++)c+=d[x]*S.at(x,v)*d[v];return c}function yr(S,E,d){var x=new Nt;return x.x=E.x+S*(d.x-E.x),x.y=E.y+S*(d.y-E.y),x}function er(S,E){var d=new Nt;return d.y=Ft(E.x-S.x),d.x=-Ft(E.y-S.y),d}function vr(S,E){var d=er(S,E);return d.y*(E.x-S.x)-d.x*(E.y-S.y)}function wr(S,E,d){var x,v,c,h;return x=E.x-S.x,v=E.y-S.y,c=d.x-S.x,h=d.y-S.y,x*h-c*v}function It(S,E,d,x){var v,c,h,o;return v=E.x-S.x,c=E.y-S.y,h=x.x-d.x,o=x.y-d.y,v*o-h*c}function br(S,E,d){var x,v,c,h;return x=E.x-S.x,v=E.y-S.y,c=d.x-S.x,h=d.y-S.y,x*c+v*h}function xr(S,E,d,x){var v,c,h,o;return v=E.x-S.x,c=E.y-S.y,h=x.x-d.x,o=x.y-d.y,v*h+c*o}function kr(S,E){return Math.sqrt((S.x-E.x)*(S.x-E.x)+(S.y-E.y)*(S.y-E.y))}var Bt={luminance:function(S,E,d){return Math.round(.2126*S+.7153*E+.0721*d)},between:function(S,E,d){return S>=E&&S<=d},clamp:function(S,E,d){return Math.min(d,Math.max(E,S))},isNumber:function(S){return typeof S=="number"},setHtmlAttr:dr,renderCurve:function(S,E){E=E||{x:1,y:1};var d=S.c[(S.n-1)*3+2],x=["M "+gt(d.x*E.x)+" "+gt(d.y*E.y)];return S.tag.forEach(function(v,c){var h=c*3,o=S.c[h],a=S.c[h+1],m=S.c[h+2];v==="CURVE"?x.push("C "+gt(o.x*E.x)+" "+gt(o.y*E.y)+", "+gt(a.x*E.x)+" "+gt(a.y*E.y)+", "+gt(m.x*E.x)+" "+gt(m.y*E.y)):v==="CORNER"&&x.push("L "+gt(a.x*E.x)+" "+gt(a.y*E.y)+" "+gt(m.x*E.x)+" "+gt(m.y*E.y))}),x.join(" ")},bezier:function(E,d,x,v,c){var h=1-E,o=new Nt;return o.x=h*h*h*d.x+3*(h*h*E)*x.x+3*(E*E*h)*v.x+E*E*E*c.x,o.y=h*h*h*d.y+3*(h*h*E)*x.y+3*(E*E*h)*v.y+E*E*E*c.y,o},tangent:function(E,d,x,v,c,h){var o,a,m,p,f,e,r,s,i,l;return o=It(E,d,c,h),a=It(d,x,c,h),m=It(x,v,c,h),p=o-2*a+m,f=-2*o+2*a,e=o,r=f*f-4*p*e,p===0||r<0?-1:(s=Math.sqrt(r),i=(-f+s)/(2*p),l=(-f-s)/(2*p),i>=0&&i<=1?i:l>=0&&l<=1?l:-1)},mod:pr,xprod:mr,cyclic:_r,sign:Ft,quadform:gr,interval:yr,dorth_infty:er,ddenom:vr,dpara:wr,cprod:It,iprod:br,iprod1:xr,ddist:kr},Dt,Mt;function Ht(){if(Mt)return Dt;Mt=1;var S=Bt,E=null;try{E=Qt}catch{}var d=nr(),x=256,v=x-1;function c(a,m){return x*a+m}function h(a,m){if(a=typeof a=="number"?S.clamp(Math.round(a),0,v):0,m=typeof m=="number"?S.clamp(Math.round(m),0,v):v,a>m)throw new Error('Invalid range "'+a+"..."+m+'"');return[a,m]}function o(a,m){if(this.data=null,this.pixels=0,this._sortedIndexes=null,this._cachedStats={},this._lookupTableH=null,typeof a=="number")this._createArray(a);else if(a instanceof d)this._collectValuesBitmap(a);else if(E&&a instanceof E)this._collectValuesJimp(a,m);else throw new Error("Unsupported image source")}return o.MODE_LUMINANCE="luminance",o.MODE_R="r",o.MODE_G="g",o.MODE_B="b",o.prototype={_createArray:function(a){var m=a<=Math.pow(2,8)?Uint8Array:a<=Math.pow(2,16)?Uint16Array:Uint32Array;return this.pixels=a,this.data=new m(x)},_collectValuesJimp:function(a,m){var p=a.bitmap.data,f=this._createArray(a.bitmap.width*a.bitmap.height);a.scan(0,0,a.bitmap.width,a.bitmap.height,function(e,r,s){var i=m===o.MODE_R?p[s]:m===o.MODE_G?p[s+1]:m===o.MODE_B?p[s+2]:S.luminance(p[s],p[s+1],p[s+2]);f[i]++})},_collectValuesBitmap:function(a){for(var m=this._createArray(a.size),p=a.data.length,f,e=0;e<p;e++)f=a.data[e],m[f]++},_getSortedIndexes:function(a){if(!a&&this._sortedIndexes)return this._sortedIndexes;var m=this.data,p=new Array(x),f=0;for(f;f<x;f++)p[f]=f;return p.sort(function(e,r){return m[e]>m[r]?1:m[e]<m[r]?-1:0}),this._sortedIndexes=p,p},_thresholdingBuildLookupTable:function(){var a=new Float64Array(x*x),m=new Float64Array(x*x),p=new Float64Array(x*x),f=this.pixels,e,r,s,i;for(e=1;e<x;++e)s=c(e,e),i=this.data[e]/f,a[s]=i,m[s]=e*i;for(e=1;e<x-1;++e)i=this.data[e+1]/f,s=c(1,e),a[s+1]=a[s]+i,m[s+1]=m[s]+(e+1)*i;for(e=2;e<x;e++)for(r=e+1;r<x;r++)a[c(e,r)]=a[c(1,r)]-a[c(1,e-1)],m[c(e,r)]=m[c(1,r)]-m[c(1,e-1)];for(e=1;e<x;++e)for(r=e+1;r<x;r++)s=c(e,r),p[s]=a[s]!==0?m[s]*m[s]/a[s]:0;return this._lookupTableH=p},multilevelThresholding:function(a,m,p){if(m=h(m,p),p=m[1],m=m[0],a=Math.min(p-m-2,~~a),a<1)return[];this._lookupTableH||this._thresholdingBuildLookupTable();var f=this._lookupTableH,e=null,r=0;a>4&&console.log("[Warning]: Threshold computation for more than 5 levels may take a long time");function s(i,l,u,_){i=(i||0)+1,l=l||0,u=u||new Array(a),_=_||0;for(var A=_+1,k,b=i;b<p-a+_;b++)k=l+f[c(i,b)],u[A-1]=b,A+1<a+1?s(b,k,u,A):(k+=f[c(b+1,p)],r<k&&(r=k,e=u.slice()))}return s(m||0),e||[]},autoThreshold:function(a,m){var p=this.multilevelThresholding(1,a,m);return p.length?p[0]:null},getDominantColor:function(a,m,p){a=h(a,m),m=a[1],a=a[0],p=p||1;var f=this.data,e=-1,r=-1,s,i,l;if(a===m)return f[a]?a:-1;for(s=a;s<=m;s++){for(l=0,i=~~(p/-2);i<p;i++)l+=S.between(s+i,0,v)?f[s+i]:0;var u=l>r,_=r===l&&(e<0||f[s]>f[e]);(u||_)&&(e=s,r=l)}return r<=0?-1:e},getStats:function(a,m,p){if(a=h(a,m),m=a[1],a=a[0],!p&&this._cachedStats[a+"-"+m])return this._cachedStats[a+"-"+m];var f=this.data,e=this._getSortedIndexes(),r=0,s=null,i,l,u,_,A=0,k=0,b=0,I,C,F,z=0,W=0;for(I=a;I<=m;I++)r+=f[I],b+=f[I]*I,z+=f[I]===0?0:1,W<f[I]&&(W=f[I]);for(i=b/r,u=r/(m-a),_=r/z,l=Math.floor(r/2),I=0;I<x;I++)F=e[I],C=f[F],!(F<a||F>m)&&(k+=C,A+=Math.pow(F-i,2)*C,s===null&&k>=l&&(s=F));return this._cachedStats[a+"-"+m]={levels:{mean:i,median:s,stdDev:Math.sqrt(A/r),unique:z},pixelsPerLevel:{mean:u,median:_,peak:W},pixels:r}}},Dt=o,Dt}var Lt,Zt;function nr(){if(Zt)return Lt;Zt=1;var S=Rt,E=Bt;function d(x,v){this._histogram=null,this.width=x,this.height=v,this.size=x*v,this.arrayBuffer=new ArrayBuffer(this.size),this.data=new Uint8Array(this.arrayBuffer)}return Lt=d,Ht(),d.prototype={getValueAt:function(x,v){var c=typeof x=="number"&&typeof v!="number"?x:this.pointToIndex(x,v);return this.data[c]},indexToPoint:function(x){var v=new S;return E.between(x,0,this.size)?(v.y=Math.floor(x/this.width),v.x=x-v.y*this.width):(v.x=-1,v.y=-1),v},pointToIndex:function(x,v){var c=x,h=v;return x instanceof S&&(c=x.x,h=x.y),!E.between(c,0,this.width)||!E.between(h,0,this.height)?-1:this.width*h+c},copy:function(x){var v=new d(this.width,this.height),c=typeof x=="function",h;for(h=0;h<this.size;h++)v.data[h]=c?x(this.data[h],h):this.data[h];return v},histogram:function(){var x=Ht();return this._histogram?this._histogram:(this._histogram=new x(this),this._histogram)}},Lt}function Ar(S){this.n=S,this.tag=new Array(S),this.c=new Array(S*3),this.alphaCurve=0,this.vertex=new Array(S),this.alpha=new Array(S),this.alpha0=new Array(S),this.beta=new Array(S)}var Sr=Ar;function Er(){this.area=0,this.len=0,this.curve={},this.pt=[],this.minX=1e5,this.minY=1e5,this.maxX=-1,this.maxY=-1}var Or=Er;function ir(){this.data=[0,0,0,0,0,0,0,0,0]}ir.prototype.at=function(S,E){return this.data[S*3+E]};var Cr=ir;function Tr(S,E,d,x,v){this.x=S,this.y=E,this.xy=d,this.x2=x,this.y2=v}var zr=Tr,Yt=Rt;function Ir(){this.pen=0,this.c=[new Yt,new Yt],this.t=0,this.s=0,this.alpha=0}var Rr=Ir,Gt=Qt,Br=nr(),Vt=Sr,_t=Rt,Pr=Or,qt=Cr,Kt=zr,Xt=Rr,G=Bt;function lt(S){this._luminanceData=null,this._pathlist=[],this._imageLoadingIdentifier=null,this._imageLoaded=!1,this._processed=!1,this._params={turnPolicy:lt.TURNPOLICY_MINORITY,turdSize:2,alphaMax:1,optCurve:!0,optTolerance:.2,threshold:lt.THRESHOLD_AUTO,blackOnWhite:!0,color:lt.COLOR_AUTO,background:lt.COLOR_TRANSPARENT,width:null,height:null},S&&this.setParameters(S)}lt.COLOR_AUTO="auto";lt.COLOR_TRANSPARENT="transparent";lt.THRESHOLD_AUTO=-1;lt.TURNPOLICY_BLACK="black";lt.TURNPOLICY_WHITE="white";lt.TURNPOLICY_LEFT="left";lt.TURNPOLICY_RIGHT="right";lt.TURNPOLICY_MINORITY="minority";lt.TURNPOLICY_MAJORITY="majority";var Jt=[lt.TURNPOLICY_BLACK,lt.TURNPOLICY_WHITE,lt.TURNPOLICY_LEFT,lt.TURNPOLICY_RIGHT,lt.TURNPOLICY_MINORITY,lt.TURNPOLICY_MAJORITY];lt.prototype={_bmToPathlist:function(){var S=this,E=this._params.threshold,d=this._params.blackOnWhite,x,v=new _t(0,0),c;E===lt.THRESHOLD_AUTO&&(E=this._luminanceData.histogram().autoThreshold()||128),x=this._luminanceData.copy(function(p){var f=d?p>E:p<E;return f?0:1});function h(p){for(var f=x.pointToIndex(p);f<x.size&&x.data[f]!==1;)f++;return f<x.size&&x.indexToPoint(f)}function o(p,f){var e,r,s;for(e=2;e<5;e++){for(s=0,r=-e+1;r<=e-1;r++)s+=x.getValueAt(p+r,f+e-1)?1:-1,s+=x.getValueAt(p+e-1,f+r-1)?1:-1,s+=x.getValueAt(p+r-1,f-e)?1:-1,s+=x.getValueAt(p-e,f+r)?1:-1;if(s>0)return 1;if(s<0)return 0}return 0}function a(p){var f=new Pr,e=p.x,r=p.y,s=0,i=1,l;for(f.sign=x.getValueAt(p.x,p.y)?"+":"-";f.pt.push(new _t(e,r)),e>f.maxX&&(f.maxX=e),e<f.minX&&(f.minX=e),r>f.maxY&&(f.maxY=r),r<f.minY&&(f.minY=r),f.len++,e+=s,r+=i,f.area-=e*i,!(e===p.x&&r===p.y);){var u=x.getValueAt(e+(s+i-1)/2,r+(i-s-1)/2),_=x.getValueAt(e+(s-i-1)/2,r+(i+s-1)/2);_&&!u?S._params.turnPolicy==="right"||S._params.turnPolicy==="black"&&f.sign==="+"||S._params.turnPolicy==="white"&&f.sign==="-"||S._params.turnPolicy==="majority"&&o(e,r)||S._params.turnPolicy==="minority"&&!o(e,r)?(l=s,s=-i,i=l):(l=s,s=i,i=-l):_?(l=s,s=-i,i=l):u||(l=s,s=i,i=-l)}return f}function m(p){var f=p.pt[0].y,e=p.len,r,s,i,l,u,_,A;for(u=1;u<e;u++)if(r=p.pt[u].x,s=p.pt[u].y,s!==f){for(l=f<s?f:s,i=p.maxX,_=r;_<i;_++)A=x.pointToIndex(_,l),x.data[A]=x.data[A]?0:1;f=s}}for(this._pathlist=[];v=h(v);)c=a(v),m(c),c.area>S._params.turdSize&&this._pathlist.push(c)},_processPath:function(){var S=this;function E(p){var f,e,r;p.x0=p.pt[0].x,p.y0=p.pt[0].y,p.sums=[];var s=p.sums;for(s.push(new Kt(0,0,0,0,0)),f=0;f<p.len;f++)e=p.pt[f].x-p.x0,r=p.pt[f].y-p.y0,s.push(new Kt(s[f].x+e,s[f].y+r,s[f].xy+e*r,s[f].x2+e*e,s[f].y2+r*r))}function d(p){var f=p.len,e=p.pt,r,s=new Array(f),i=new Array(f),l=new Array(4);p.lon=new Array(f);var u=[new _t,new _t],_=new _t,A=new _t,k=new _t,b,I,C,F,z,W,q,g,T=0;for(I=f-1;I>=0;I--)e[I].x!=e[T].x&&e[I].y!=e[T].y&&(T=I+1),i[I]=T;for(I=f-1;I>=0;I--){for(l[0]=l[1]=l[2]=l[3]=0,r=(3+3*(e[G.mod(I+1,f)].x-e[I].x)+(e[G.mod(I+1,f)].y-e[I].y))/2,l[r]++,u[0].x=0,u[0].y=0,u[1].x=0,u[1].y=0,T=i[I],F=I;;){if(b=0,r=(3+3*G.sign(e[T].x-e[F].x)+G.sign(e[T].y-e[F].y))/2,l[r]++,l[0]&&l[1]&&l[2]&&l[3]){s[I]=F,b=1;break}if(_.x=e[T].x-e[I].x,_.y=e[T].y-e[I].y,G.xprod(u[0],_)<0||G.xprod(u[1],_)>0||(Math.abs(_.x)<=1&&Math.abs(_.y)<=1||(A.x=_.x+(_.y>=0&&(_.y>0||_.x<0)?1:-1),A.y=_.y+(_.x<=0&&(_.x<0||_.y<0)?1:-1),G.xprod(u[0],A)>=0&&(u[0].x=A.x,u[0].y=A.y),A.x=_.x+(_.y<=0&&(_.y<0||_.x<0)?1:-1),A.y=_.y+(_.x>=0&&(_.x>0||_.y<0)?1:-1),G.xprod(u[1],A)<=0&&(u[1].x=A.x,u[1].y=A.y)),F=T,T=i[F],!G.cyclic(T,I,F)))break}b===0&&(k.x=G.sign(e[T].x-e[F].x),k.y=G.sign(e[T].y-e[F].y),_.x=e[F].x-e[I].x,_.y=e[F].y-e[I].y,z=G.xprod(u[0],_),W=G.xprod(u[0],k),q=G.xprod(u[1],_),g=G.xprod(u[1],k),C=1e7,W<0&&(C=Math.floor(z/-W)),g>0&&(C=Math.min(C,Math.floor(-q/g))),s[I]=G.mod(F+C,f))}for(C=s[f-1],p.lon[f-1]=C,I=f-2;I>=0;I--)G.cyclic(I+1,s[I],C)&&(C=s[I]),p.lon[I]=C;for(I=f-1;G.cyclic(G.mod(I+1,f),C,p.lon[I]);I--)p.lon[I]=C}function x(p){function f(W,q,g){var T=W.len,n=W.pt,L=W.sums,nt,j,tt,M,Q,B,P,$,Y,Z,rt,et,X,at,ot=0;return g>=T&&(g-=T,ot=1),ot===0?(nt=L[g+1].x-L[q].x,j=L[g+1].y-L[q].y,M=L[g+1].x2-L[q].x2,tt=L[g+1].xy-L[q].xy,Q=L[g+1].y2-L[q].y2,B=g+1-q):(nt=L[g+1].x-L[q].x+L[T].x,j=L[g+1].y-L[q].y+L[T].y,M=L[g+1].x2-L[q].x2+L[T].x2,tt=L[g+1].xy-L[q].xy+L[T].xy,Q=L[g+1].y2-L[q].y2+L[T].y2,B=g+1-q+T),rt=(n[q].x+n[g].x)/2-n[0].x,et=(n[q].y+n[g].y)/2-n[0].y,at=n[g].x-n[q].x,X=-(n[g].y-n[q].y),P=(M-2*nt*rt)/B+rt*rt,$=(tt-nt*et-j*rt)/B+rt*et,Y=(Q-2*j*et)/B+et*et,Z=X*X*P+2*X*at*$+at*at*Y,Math.sqrt(Z)}var e,r,s,i,l=p.len,u=new Array(l+1),_=new Array(l+1),A=new Array(l),k=new Array(l+1),b=new Array(l+1),I=new Array(l+1),C,F,z;for(e=0;e<l;e++)z=G.mod(p.lon[G.mod(e-1,l)]-1,l),z==e&&(z=G.mod(e+1,l)),z<e?A[e]=l:A[e]=z;for(r=1,e=0;e<l;e++)for(;r<=A[e];)k[r]=e,r++;for(e=0,r=0;e<l;r++)b[r]=e,e=A[e];for(b[r]=l,s=r,e=l,r=s;r>0;r--)I[r]=e,e=k[e];for(I[0]=0,u[0]=0,r=1;r<=s;r++)for(e=I[r];e<=b[r];e++){for(F=-1,i=b[r-1];i>=k[e];i--)C=f(p,i,e)+u[i],(F<0||C<F)&&(_[e]=i,F=C);u[e]=F}for(p.m=s,p.po=new Array(s),e=l,r=s-1;e>0;r--)e=_[e],p.po[r]=e}function v(p){function f(P,$,Y,Z,rt){for(var et=P.len,X=P.sums,at,ot,ht,mt,pt,t,U,D,w,y,O,N=0;Y>=et;)Y-=et,N+=1;for(;$>=et;)$-=et,N-=1;for(;Y<0;)Y+=et,N-=1;for(;$<0;)$+=et,N+=1;at=X[Y+1].x-X[$].x+N*X[et].x,ot=X[Y+1].y-X[$].y+N*X[et].y,ht=X[Y+1].x2-X[$].x2+N*X[et].x2,mt=X[Y+1].xy-X[$].xy+N*X[et].xy,pt=X[Y+1].y2-X[$].y2+N*X[et].y2,t=Y+1-$+N*et,Z.x=at/t,Z.y=ot/t,U=(ht-at*at/t)/t,D=(mt-at*ot/t)/t,w=(pt-ot*ot/t)/t,y=(U+w+Math.sqrt((U-w)*(U-w)+4*D*D))/2,U-=y,w-=y,Math.abs(U)>=Math.abs(w)?(O=Math.sqrt(U*U+D*D),O!==0&&(rt.x=-D/O,rt.y=U/O)):(O=Math.sqrt(w*w+D*D),O!==0&&(rt.x=-w/O,rt.y=D/O)),O===0&&(rt.x=rt.y=0)}var e=p.m,r=p.po,s=p.len,i=p.pt,l=p.x0,u=p.y0,_=new Array(e),A=new Array(e),k=new Array(e),b=new Array(3),I,C,F,z,W,q=new _t;for(p.curve=new Vt(e),C=0;C<e;C++)F=r[G.mod(C+1,e)],F=G.mod(F-r[C],s)+r[C],_[C]=new _t,A[C]=new _t,f(p,r[C],F,_[C],A[C]);for(C=0;C<e;C++)if(k[C]=new qt,I=A[C].x*A[C].x+A[C].y*A[C].y,I===0)for(F=0;F<3;F++)for(z=0;z<3;z++)k[C].data[F*3+z]=0;else for(b[0]=A[C].y,b[1]=-A[C].x,b[2]=-b[1]*_[C].y-b[0]*_[C].x,W=0;W<3;W++)for(z=0;z<3;z++)k[C].data[W*3+z]=b[W]*b[z]/I;var g,T,n,L,nt,j,tt,M,Q,B;for(C=0;C<e;C++){for(g=new qt,T=new _t,q.x=i[r[C]].x-l,q.y=i[r[C]].y-u,F=G.mod(C-1,e),W=0;W<3;W++)for(z=0;z<3;z++)g.data[W*3+z]=k[F].at(W,z)+k[C].at(W,z);for(;;){if(nt=g.at(0,0)*g.at(1,1)-g.at(0,1)*g.at(1,0),nt!==0){T.x=(-g.at(0,2)*g.at(1,1)+g.at(1,2)*g.at(0,1))/nt,T.y=(g.at(0,2)*g.at(1,0)-g.at(1,2)*g.at(0,0))/nt;break}for(g.at(0,0)>g.at(1,1)?(b[0]=-g.at(0,1),b[1]=g.at(0,0)):g.at(1,1)?(b[0]=-g.at(1,1),b[1]=g.at(1,0)):(b[0]=1,b[1]=0),I=b[0]*b[0]+b[1]*b[1],b[2]=-b[1]*q.y-b[0]*q.x,W=0;W<3;W++)for(z=0;z<3;z++)g.data[W*3+z]+=b[W]*b[z]/I}if(n=Math.abs(T.x-q.x),L=Math.abs(T.y-q.y),n<=.5&&L<=.5){p.curve.vertex[C]=new _t(T.x+l,T.y+u);continue}if(j=G.quadform(g,q),M=q.x,Q=q.y,g.at(0,0)!==0)for(B=0;B<2;B++)T.y=q.y-.5+B,T.x=-(g.at(0,1)*T.y+g.at(0,2))/g.at(0,0),n=Math.abs(T.x-q.x),tt=G.quadform(g,T),n<=.5&&tt<j&&(j=tt,M=T.x,Q=T.y);if(g.at(1,1)!==0)for(B=0;B<2;B++)T.x=q.x-.5+B,T.y=-(g.at(1,0)*T.x+g.at(1,2))/g.at(1,1),L=Math.abs(T.y-q.y),tt=G.quadform(g,T),L<=.5&&tt<j&&(j=tt,M=T.x,Q=T.y);for(W=0;W<2;W++)for(z=0;z<2;z++)T.x=q.x-.5+W,T.y=q.y-.5+z,tt=G.quadform(g,T),tt<j&&(j=tt,M=T.x,Q=T.y);p.curve.vertex[C]=new _t(M+l,Q+u)}}function c(p){var f=p.curve,e=f.n,r=f.vertex,s,i,l;for(s=0,i=e-1;s<i;s++,i--)l=r[s],r[s]=r[i],r[i]=l}function h(p){var f=p.curve.n,e=p.curve,r,s,i,l,u,_,A,k,b;for(r=0;r<f;r++)s=G.mod(r+1,f),i=G.mod(r+2,f),b=G.interval(1/2,e.vertex[i],e.vertex[s]),u=G.ddenom(e.vertex[r],e.vertex[i]),u!==0?(l=G.dpara(e.vertex[r],e.vertex[s],e.vertex[i])/u,l=Math.abs(l),_=l>1?1-1/l:0,_=_/.75):_=4/3,e.alpha0[s]=_,_>=S._params.alphaMax?(e.tag[s]="CORNER",e.c[3*s+1]=e.vertex[s],e.c[3*s+2]=b):(_<.55?_=.55:_>1&&(_=1),A=G.interval(.5+.5*_,e.vertex[r],e.vertex[s]),k=G.interval(.5+.5*_,e.vertex[i],e.vertex[s]),e.tag[s]="CURVE",e.c[3*s+0]=A,e.c[3*s+1]=k,e.c[3*s+2]=b),e.alpha[s]=_,e.beta[s]=.5;e.alphaCurve=1}function o(p){function f(j,tt,M,Q,B,P,$){var Y=j.curve.n,Z=j.curve,rt=Z.vertex,et,X,at,ot,ht,mt,pt,t,U,D,w,y,O,N,H,R,K,J,V,it,ut,st,ft;if(tt==M||(et=tt,ht=G.mod(tt+1,Y),X=G.mod(et+1,Y),ot=P[X],ot===0))return 1;for(t=G.ddist(rt[tt],rt[ht]),et=X;et!=M;et=X)if(X=G.mod(et+1,Y),at=G.mod(et+2,Y),P[X]!=ot||G.sign(G.cprod(rt[tt],rt[ht],rt[X],rt[at]))!=ot||G.iprod1(rt[tt],rt[ht],rt[X],rt[at])<t*G.ddist(rt[X],rt[at])*-.999847695156)return 1;if(w=Z.c[G.mod(tt,Y)*3+2].copy(),y=rt[G.mod(tt+1,Y)].copy(),O=rt[G.mod(M,Y)].copy(),N=Z.c[G.mod(M,Y)*3+2].copy(),mt=$[M]-$[tt],mt-=G.dpara(rt[0],Z.c[tt*3+2],Z.c[M*3+2])/2,tt>=M&&(mt+=$[Y]),J=G.dpara(w,y,O),V=G.dpara(w,y,N),it=G.dpara(w,O,N),ut=J+it-V,V==J||(ft=it/(it-ut),st=V/(V-J),R=V*ft/2,R===0))return 1;for(K=mt/R,pt=2-Math.sqrt(4-K/.3),Q.c[0]=G.interval(ft*pt,w,y),Q.c[1]=G.interval(st*pt,N,O),Q.alpha=pt,Q.t=ft,Q.s=st,y=Q.c[0].copy(),O=Q.c[1].copy(),Q.pen=0,et=G.mod(tt+1,Y);et!=M;et=X){if(X=G.mod(et+1,Y),ft=G.tangent(w,y,O,N,rt[et],rt[X]),ft<-.5||(H=G.bezier(ft,w,y,O,N),t=G.ddist(rt[et],rt[X]),t===0)||(U=G.dpara(rt[et],rt[X],H)/t,Math.abs(U)>B)||G.iprod(rt[et],rt[X],H)<0||G.iprod(rt[X],rt[et],H)<0)return 1;Q.pen+=U*U}for(et=tt;et!=M;et=X){if(X=G.mod(et+1,Y),ft=G.tangent(w,y,O,N,Z.c[et*3+2],Z.c[X*3+2]),ft<-.5||(H=G.bezier(ft,w,y,O,N),t=G.ddist(Z.c[et*3+2],Z.c[X*3+2]),t===0)||(U=G.dpara(Z.c[et*3+2],Z.c[X*3+2],H)/t,D=G.dpara(Z.c[et*3+2],Z.c[X*3+2],rt[X])/t,D*=.75*Z.alpha[X],D<0&&(U=-U,D=-D),U<D-B))return 1;U<D&&(Q.pen+=(U-D)*(U-D))}return 0}var e=p.curve,r=e.n,s=e.vertex,i=new Array(r+1),l=new Array(r+1),u=new Array(r+1),_=new Array(r+1),A,k,b,I,C=new Xt,F,z,W,q,g,T,n,L=new Array(r),nt=new Array(r+1);for(k=0;k<r;k++)e.tag[k]=="CURVE"?L[k]=G.sign(G.dpara(s[G.mod(k-1,r)],s[k],s[G.mod(k+1,r)])):L[k]=0;for(W=0,nt[0]=0,F=e.vertex[0],k=0;k<r;k++)z=G.mod(k+1,r),e.tag[z]=="CURVE"&&(q=e.alpha[z],W+=.3*q*(4-q)*G.dpara(e.c[k*3+2],s[z],e.c[z*3+2])/2,W+=G.dpara(F,e.c[k*3+2],e.c[z*3+2])/2),nt[k+1]=W;for(i[0]=-1,l[0]=0,u[0]=0,b=1;b<=r;b++)for(i[b]=b-1,l[b]=l[b-1],u[b]=u[b-1]+1,k=b-2;k>=0&&(I=f(p,k,G.mod(b,r),C,S._params.optTolerance,L,nt),!I);k--)(u[b]>u[k]+1||u[b]==u[k]+1&&l[b]>l[k]+C.pen)&&(i[b]=k,l[b]=l[k]+C.pen,u[b]=u[k]+1,_[b]=C,C=new Xt);for(A=u[r],g=new Vt(A),T=new Array(A),n=new Array(A),b=r,k=A-1;k>=0;k--)i[b]==b-1?(g.tag[k]=e.tag[G.mod(b,r)],g.c[k*3+0]=e.c[G.mod(b,r)*3+0],g.c[k*3+1]=e.c[G.mod(b,r)*3+1],g.c[k*3+2]=e.c[G.mod(b,r)*3+2],g.vertex[k]=e.vertex[G.mod(b,r)],g.alpha[k]=e.alpha[G.mod(b,r)],g.alpha0[k]=e.alpha0[G.mod(b,r)],g.beta[k]=e.beta[G.mod(b,r)],T[k]=n[k]=1):(g.tag[k]="CURVE",g.c[k*3+0]=_[b].c[0],g.c[k*3+1]=_[b].c[1],g.c[k*3+2]=e.c[G.mod(b,r)*3+2],g.vertex[k]=G.interval(_[b].s,e.c[G.mod(b,r)*3+2],s[G.mod(b,r)]),g.alpha[k]=_[b].alpha,g.alpha0[k]=_[b].alpha,T[k]=_[b].s,n[k]=_[b].t),b=i[b];for(k=0;k<A;k++)z=G.mod(k+1,A),g.beta[k]=T[k]/(T[k]+n[z]);g.alphaCurve=1,p.curve=g}for(var a=0;a<this._pathlist.length;a++){var m=this._pathlist[a];E(m),d(m),x(m),v(m),m.sign==="-"&&c(m),h(m),S._params.optCurve&&o(m)}},_validateParameters:function(S){if(S&&S.turnPolicy&&Jt.indexOf(S.turnPolicy)===-1){var E="'"+Jt.join("', '")+"'";throw new Error("Bad turnPolicy value. Allowed values are: "+E)}if(S&&S.threshold!=null&&S.threshold!==lt.THRESHOLD_AUTO&&(typeof S.threshold!="number"||!G.between(S.threshold,0,255)))throw new Error("Bad threshold value. Expected to be an integer in range 0..255");if(S&&S.optCurve!=null&&typeof S.optCurve!="boolean")throw new Error("'optCurve' must be Boolean")},_processLoadedImage:function(S){var E=new Br(S.bitmap.width,S.bitmap.height),d=S.bitmap.data;S.scan(0,0,S.bitmap.width,S.bitmap.height,function(x,v,c){var h=d[c+3]/255,o=255+(d[c+0]-255)*h,a=255+(d[c+1]-255)*h,m=255+(d[c+2]-255)*h;E.data[c/4]=G.luminance(o,a,m)}),this._luminanceData=E,this._imageLoaded=!0},loadImage:function(S,E){var d=this,x={};this._imageLoadingIdentifier=x,this._imageLoaded=!1,S instanceof Gt?(this._imageLoadingIdentifier=null,this._imageLoaded=!0,d._processLoadedImage(S),E.call(d,null)):Gt.read(S,function(v,c){var h=d._imageLoadingIdentifier!==x;if(h){var o=v||new Error("Another image was loaded instead");return E.call(d,o)}d._imageLoadingIdentifier=null,d._processLoadedImage(c),E.call(d,null)})},setParameters:function(S){var E,d;this._validateParameters(S);for(E in this._params)this._params.hasOwnProperty(E)&&S.hasOwnProperty(E)&&(d=this._params[E],this._params[E]=S[E],d!==this._params[E]&&["color","background"].indexOf(E)===-1&&(this._processed=!1))},getPathTag:function(S,E){if(S=arguments.length===0?this._params.color:S,S===lt.COLOR_AUTO&&(S=this._params.blackOnWhite?"black":"white"),!this._imageLoaded)throw new Error("Image should be loaded first");this._processed||(this._bmToPathlist(),this._processPath(),this._processed=!0);var d='<path d="';return d+=this._pathlist.map(function(x){return G.renderCurve(x.curve,E)}).join(" "),d+='" stroke="none" fill="'+S+'" fill-rule="evenodd"/>',d},getSymbol:function(S){return'<symbol viewBox="0 0 '+this._luminanceData.width+" "+this._luminanceData.height+'" id="'+S+'">'+this.getPathTag("")+"</symbol>"},getSVG:function(){var S=this._params.width||this._luminanceData.width,E=this._params.height||this._luminanceData.height,d={x:this._params.width?this._params.width/this._luminanceData.width:1,y:this._params.height?this._params.height/this._luminanceData.height:1};return'<svg xmlns="http://www.w3.org/2000/svg" width="'+S+'" height="'+E+'" viewBox="0 0 '+S+" "+E+`" version="1.1">
`+(this._params.background!==lt.COLOR_TRANSPARENT?'	<rect x="0" y="0" width="100%" height="100%" fill="'+this._params.background+`" />
`:"")+"	"+this.getPathTag(this._params.color,d)+`
</svg>`}};var ar=lt,vt=ar,xt=Bt;function dt(S){this._potrace=new vt,this._calculatedThreshold=null,this._params={threshold:vt.THRESHOLD_AUTO,blackOnWhite:!0,steps:dt.STEPS_AUTO,background:vt.COLOR_TRANSPARENT,fillStrategy:dt.FILL_DOMINANT,rangeDistribution:dt.RANGES_AUTO},S&&this.setParameters(S)}for(var Et in vt)Object.prototype.hasOwnProperty.call(vt,Et)&&Et===Et.toUpperCase()&&(dt[Et]=vt[Et]);dt.STEPS_AUTO=-1;dt.FILL_SPREAD="spread";dt.FILL_DOMINANT="dominant";dt.FILL_MEDIAN="median";dt.FILL_MEAN="mean";dt.RANGES_AUTO="auto";dt.RANGES_EQUAL="equal";dt.prototype={_addExtraColorStop:function(S){var E=this._params.blackOnWhite,d=S[S.length-1],x=E?0:d.value,v=E?d.value:255;if(v-x>25&&d.colorIntensity!==1){var c=this._getImageHistogram(),h=c.getStats(x,v).levels,o=h.mean+h.stdDev<=25?h.mean+h.stdDev:h.mean-h.stdDev<=25?h.mean-h.stdDev:25,a=E?c.getStats(0,o):c.getStats(o,255),m=a.levels.mean;S.push({value:Math.abs((E?0:255)-o),colorIntensity:isNaN(m)?0:(E?255-m:m)/255})}return S},_calcColorIntensity:function(S){var E=this._params.blackOnWhite,d=this._params.fillStrategy,x=d!==dt.FILL_SPREAD?this._getImageHistogram():null,v=Math.abs(this._paramThreshold()-(E?0:255));return S.map(function(c,h){var o=h+1===S.length?E?-1:256:S[h+1],a=Math.round(E?o+1:c),m=Math.round(E?c:o-1),p=h/(S.length-1),f=m-a,e=x.getStats(a,m),r=-1;if(e.pixels===0)return{value:c,colorIntensity:0};switch(d){case dt.FILL_SPREAD:r=(E?a:m)+(E?1:-1)*f*Math.max(.5,v/255)*p;break;case dt.FILL_DOMINANT:r=x.getDominantColor(a,m,xt.clamp(f,1,5));break;case dt.FILL_MEAN:r=e.levels.mean;break;case dt.FILL_MEDIAN:r=e.levels.median;break}return h!==0&&(r=E?xt.clamp(r,a,m-Math.round(f*.1)):xt.clamp(r,a+Math.round(f*.1),m)),{value:c,colorIntensity:r===-1?0:(E?255-r:r)/255}})},_getImageHistogram:function(){return this._potrace._luminanceData.histogram()},_getRanges:function(){var S=this._paramSteps();if(!Array.isArray(S))return this._params.rangeDistribution===dt.RANGES_AUTO?this._getRangesAuto():this._getRangesEquallyDistributed();var E=[],d=this._paramThreshold(),x=this._params.blackOnWhite;return S.forEach(function(v){E.indexOf(v)===-1&&xt.between(v,0,255)&&E.push(v)}),E.length||E.push(d),E=E.sort(function(v,c){return v<c===x?1:-1}),x&&E[0]<d?E.unshift(d):!x&&E[E.length-1]<d&&E.push(d),this._calcColorIntensity(E)},_getRangesAuto:function(){var S=this._getImageHistogram(),E=this._paramSteps(!0),d;if(this._params.threshold===vt.THRESHOLD_AUTO)d=S.multilevelThresholding(E);else{var x=this._paramThreshold();d=this._params.blackOnWhite?S.multilevelThresholding(E-1,0,x):S.multilevelThresholding(E-1,x,255),this._params.blackOnWhite?d.push(x):d.unshift(x)}return this._params.blackOnWhite&&(d=d.reverse()),this._calcColorIntensity(d)},_getRangesEquallyDistributed:function(){for(var S=this._params.blackOnWhite,E=S?this._paramThreshold():255-this._paramThreshold(),d=this._paramSteps(),x=E/d,v=[],c=d-1,h;c>=0;)h=Math.min(E,(c+1)*x),h=S?h:255-h,c--,v.push(h);return this._calcColorIntensity(v)},_paramSteps:function(S){var E=this._params.steps;if(Array.isArray(E))return S?E.length:E;if(E===dt.STEPS_AUTO&&this._params.threshold===vt.THRESHOLD_AUTO)return 4;var d=this._params.blackOnWhite,x=d?this._paramThreshold():255-this._paramThreshold();return E===dt.STEPS_AUTO?x>200?4:3:Math.min(x,Math.max(2,E))},_paramThreshold:function(){if(this._calculatedThreshold!==null)return this._calculatedThreshold;if(this._params.threshold!==vt.THRESHOLD_AUTO)return this._calculatedThreshold=this._params.threshold,this._calculatedThreshold;var S=this._getImageHistogram().multilevelThresholding(2);return this._calculatedThreshold=this._params.blackOnWhite?S[1]:S[0],this._calculatedThreshold=this._calculatedThreshold||128,this._calculatedThreshold},_pathTags:function(S){var E=this._getRanges(),d=this._potrace,x=this._params.blackOnWhite;E.length>=10&&(E=this._addExtraColorStop(E)),d.setParameters({blackOnWhite:x});var v=0;return E.map(function(c){var h=c.colorIntensity;if(h===0)return"";var o=!v||h===1?h:(v-h)/(v-1);o=xt.clamp(parseFloat(o.toFixed(3)),0,1),v=v+(1-v)*o,d.setParameters({threshold:c.value});var a=S?d.getPathTag(""):d.getPathTag();a=xt.setHtmlAttr(a,"fill-opacity",o.toFixed(3));var m=o===0||a.indexOf(' d=""')!==-1;return m?"":a})},loadImage:function(S,E){var d=this;this._potrace.loadImage(S,function(x){d._calculatedThreshold=null,E.call(d,x)})},setParameters:function(S){if(S){if(this._potrace.setParameters(S),S.steps&&!Array.isArray(S.steps)&&(!xt.isNumber(S.steps)||!xt.between(S.steps,1,255)))throw new Error("Bad 'steps' value");for(var E in this._params)this._params.hasOwnProperty(E)&&S.hasOwnProperty(E)&&(this._params[E]=S[E]);this._calculatedThreshold=null}},getSymbol:function(S){var E=this._potrace._luminanceData.width,d=this._potrace._luminanceData.height,x=this._pathTags(!0);return'<symbol viewBox="0 0 '+E+" "+d+'" id="'+S+'">'+x.join("")+"</symbol>"},getSVG:function(){var S=this._potrace._luminanceData.width,E=this._potrace._luminanceData.height,d=this._pathTags(!1),x='<svg xmlns="http://www.w3.org/2000/svg" width="'+S+'" height="'+E+'" viewBox="0 0 '+S+" "+E+`" version="1.1">
	`+(this._params.background!==vt.COLOR_TRANSPARENT?'<rect x="0" y="0" width="100%" height="100%" fill="'+this._params.background+`" />
	`:"")+d.join(`
	`)+`
</svg>`;return x.replace(/\n(?:\t*\n)+(\t*)/g,`
$1`)}};var Dr=dt,sr=ar,or=Dr;function Lr(S,E,d){arguments.length===2&&(d=E,E={});var x=new sr(E);x.loadImage(S,function(v){if(v)return d(v);d(null,x.getSVG(),x)})}function Ur(S,E,d){arguments.length===2&&(d=E,E={});var x=new or(E);x.loadImage(S,function(v){if(v)return d(v);d(null,x.getSVG(),x)})}var Fr={trace:Lr,posterize:Ur,Potrace:sr,Posterizer:or};const Mr=$t(Fr);export{jr as F,Wr as J,Mr as p};
